(()=>{"use strict";var t={d:(e,n)=>{for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};t.d({},{a:()=>p});class e{constructor(){this.title,this.description,this.dueDate,this.priority,this.notes,this.checkList=[]}addChecklistItem(t,e){const n={};n.value=t,n.state=e||!1,this.checkList.push(n)}removeChecklistItem(t){this.checkList.splice(this.checkList.indexOf(t),1)}}class n{constructor(){this._defaultStatus=!1,this.title,this.todoList=[]}isDefault(){return this._defaultStatus}setDefaultStatus(t){this._defaultStatus=t}addTodo(t){this.todoList.push(t)}removeTodo(t){this.todoList.splice(this.todoList.indexOf(t),1)}}class o{projectsList=[];addProject(t){this.projectsList.push(t)}removeProject(t){this.projectsList.splice(this.projectsList.indexOf(t),1)}}const s={events:{},subscribe:function(t,e){this.events[t]=this.events[t]||[],this.events[t].push(e)},publish:function(t,e){this.events[t]&&this.events[t].forEach((t=>{t(e)}))}};class i{projectModal(){const t=document.querySelector("form");t.textContent="";const e=document.createElement("label");e.textContent="Title:";const n=document.createElement("input");n.setAttribute("name","title"),n.setAttribute("id","title"),n.setAttribute("type","text");const o=document.createElement("label");o.textContent="Set as default";const s=document.createElement("input");s.setAttribute("name","isdefault"),s.setAttribute("id","isdefault"),s.setAttribute("type","checkbox");const i=document.createElement("button");i.textContent="Done",i.setAttribute("id","done-button");const c=document.createElement("button");c.textContent="Cancel",c.setAttribute("id","close-dialog"),c.setAttribute("formmethod","dialog"),c.setAttribute("type","button");const d=document.createElement("span");return d.setAttribute("id","error-span"),t.append(e,n,o,s,i,c,d)}todoPropertiesToInject=[new c,new d,new r,new l,new a,new u];todoModal(t){const e=document.querySelector("form");e.textContent="";for(let n of t){const t=document.createElement("label");t.textContent=n.name,t.setAttribute("for",n.nameAsHTMLAttribute),e.append(t,n.createInputElementsForForm())}const n=document.createElement("button");n.textContent="Done",n.setAttribute("id","done-button"),n.setAttribute("type","submit");const o=document.createElement("button");o.textContent="Cancel",o.setAttribute("id","close-dialog"),o.setAttribute("formmethod","dialog"),o.setAttribute("type","button");const s=document.createElement("span");s.setAttribute("id","error-span"),e.append(n,o,s)}}class c{constructor(){this.name="Title",this.nameAsHTMLAttribute="title"}createInputElementsForForm(){const t=document.createElement("input");return t.setAttribute("type","text"),t.setAttribute("id",this.nameAsHTMLAttribute),t.setAttribute("name",this.nameAsHTMLAttribute),t}displayDetailsFromTodoAsEditable(t){const e=document.createElement("input");return e.setAttribute("type","text"),e.setAttribute("id","title-input"),e.value=t.title,e}}class d{constructor(){this.name="Description",this.nameAsHTMLAttribute="description"}createInputElementsForForm(){const t=document.createElement("textarea");return t.setAttribute("id",this.nameAsHTMLAttribute),t.setAttribute("name",this.nameAsHTMLAttribute),t}displayElementsWithContentForTodoScreen(t){const e=document.createElement("fieldset"),n=document.createElement("legend");n.textContent=this.name,e.appendChild(n);const o=document.createElement("p");return o.textContent=t.description,e.appendChild(o),e}displayDetailsFromTodoAsEditable(t){const e=document.createElement("fieldset"),n=document.createElement("legend");n.textContent=this.name,e.appendChild(n);const o=this.createInputElementsForForm();return e.appendChild(o),o.textContent=t.description,e}}class r{constructor(){this.name="Due Date",this.nameAsHTMLAttribute="due-date"}createInputElementsForForm(){const t=document.createElement("input");return t.setAttribute("type","date"),t.setAttribute("id",this.nameAsHTMLAttribute),t.setAttribute("name",this.nameAsHTMLAttribute),t}displayElementsWithContentForTodoScreen(t){const e=document.createElement("fieldset"),n=document.createElement("legend");n.textContent=this.name,e.appendChild(n);const o=document.createElement("p");return o.textContent=t.dueDate,e.appendChild(o),e}displayDetailsFromTodoAsEditable(t){const e=document.createElement("fieldset"),n=document.createElement("legend");n.textContent=this.name,e.appendChild(n);const o=this.createInputElementsForForm();return e.appendChild(o),o.value=t.dueDate,e}}class l{constructor(){this.name="Priority",this.nameAsHTMLAttribute="priority"}createInputElementsForForm(){const t=function(){const t=document.createElement("select"),e=["High","Medium","Normal"],n=document.createElement("option");n.textContent="Select an option",n.setAttribute("value",""),n.setAttribute("selected",""),t.appendChild(n);for(let n of e){const e=document.createElement("option");e.textContent=n,e.setAttribute("value",n[0].toLowerCase()+n.slice(1)),t.appendChild(e)}return t}();return t.setAttribute("id",this.nameAsHTMLAttribute),t.setAttribute("name",this.nameAsHTMLAttribute),t}displayElementsWithContentForTodoScreen(t){const e=document.createElement("fieldset"),n=document.createElement("legend");n.textContent=this.name,e.appendChild(n);const o=document.createElement("p");return o.textContent=t.priority,e.appendChild(o),e}displayDetailsFromTodoAsEditable(t){const e=document.createElement("fieldset"),n=document.createElement("legend");n.textContent=this.name,e.appendChild(n);const o=this.createInputElementsForForm();return e.appendChild(o),o.value=t.priority,e}}class a{constructor(){this.name="Notes",this.nameAsHTMLAttribute="notes"}createInputElementsForForm(){const t=document.createElement("textarea");return t.setAttribute("id",this.nameAsHTMLAttribute),t.setAttribute("name",this.nameAsHTMLAttribute),t}displayElementsWithContentForTodoScreen(t){const e=document.createElement("fieldset"),n=document.createElement("legend");n.textContent=this.name,e.appendChild(n);const o=document.createElement("p");return o.textContent=t.notes,e.appendChild(o),e}displayDetailsFromTodoAsEditable(t){const e=document.createElement("fieldset"),n=document.createElement("legend");n.textContent=this.name,e.appendChild(n);const o=this.createInputElementsForForm();return e.appendChild(o),o.textContent=t.notes,e}}class u{constructor(){this.name="Checklist",this.nameAsHTMLAttribute="checklist-input"}createInputElementsForForm(){const t=document.createElement("div");t.setAttribute("id","checklist-div");const e=document.createElement("input");e.setAttribute("type","text"),e.setAttribute("id",this.nameAsHTMLAttribute);const n=document.createElement("button");return n.textContent="Add",n.setAttribute("type","button"),n.setAttribute("id","checklist-add-button"),t.append(e,n),t}displayElementsWithContentForTodoScreen(t,e){const n=document.createElement("fieldset");n.setAttribute("id","checklist-fieldset");const o=document.createElement("legend");o.textContent=this.name,n.appendChild(o);const i=document.createElement("div"),c=document.createElement("input");c.setAttribute("id","checklist-input-todo");const d=document.createElement("button");d.textContent="Add",d.setAttribute("id","checklist-add-button-todo"),i.append(c,d),n.appendChild(i);const r=document.createElement("ul");for(let n of t.checkList){const o=document.createElement("li");r.appendChild(o);const i=document.createElement("input");i.setAttribute("type","checkbox"),!0===n.state?i.checked=!0:i.checked=!1,i.addEventListener("change",(t=>{!0===n.state?n.state=!1:n.state=!0,s.publish("localStorageUpdated")}));const c=document.createElement("label");c.textContent=n.value;const d=document.createElement("button");d.textContent="x",d.addEventListener("click",(o=>{s.publish("checklistItemDeleted",{checklistItem:n,todoItem:t,projectItem:e})})),o.append(i,c,d)}return n.appendChild(r),n}}s.subscribe("todoItemDeleted",(function({todoItem:t,projectItem:e}){e.removeTodo(t),s.publish("localStorageUpdated")})),s.subscribe("todoItemAdded",(function({todoItem:t,projectItem:n}){let o=new e;for(let e in t)"_state"!==e&&("due-date"===e?o.dueDate=t[e]:o[e]=t[e]);n.addTodo(o),s.publish("localStorageUpdated")})),s.subscribe("projectItemDeleted",(function(t){p.removeProject(t),s.publish("localStorageUpdated")})),s.subscribe("projectItemAdded",(function(t){let e=new n;for(let n in t)if("_defaultStatus"!==n)if("isdefault"===n)if("on"===t.isdefault){e.setDefaultStatus(!0);for(let t of p.projectsList)if(t.isDefault()){t.setDefaultStatus(!1);break}console.log(t.title,"project is now the default")}else e.setDefaultStatus(!1);else e[n]=t[n];t.isDefault&&(t.isDefault()?e.setDefaultStatus(!0):e.setDefaultStatus(!1)),p.addProject(e),s.publish("localStorageUpdated")})),s.subscribe("todoItemAdded",b),s.subscribe("todoItemDeleted",b),s.subscribe("projectItemDeleted",f),s.subscribe("projectItemAdded",f),s.subscribe("checklistItemDeleted",(function({checklistItem:t,todoItem:e}){e.removeChecklistItem(t),s.publish("localStorageUpdated")})),s.subscribe("checklistItemDeleted",h),s.subscribe("checklistItemAdded",(function({checklistItem:t,todoItem:e}){e.addChecklistItem(t),s.publish("localStorageUpdated")})),s.subscribe("checklistItemAdded",h),s.subscribe("updateProjectDefaultStatus",(function(t){t.setDefaultStatus(!0);for(let e of p.projectsList)if(t!==e&&e.isDefault()){e.setDefaultStatus(!1);break}s.publish("localStorageUpdated")})),s.subscribe("localStorageUpdated",(function(){!function(t){let e;try{e=window.localStorage;const t="__storage_test__";return e.setItem(t,t),e.removeItem(t),!0}catch(t){return t instanceof DOMException&&(22===t.code||1014===t.code||"QuotaExceededError"===t.name||"NS_ERROR_DOM_QUOTA_REACHED"===t.name)&&e&&0!==e.length}}()?alert("Too bad, no localStorage for us"):(console.log(p),localStorage.setItem("allProjects",JSON.stringify(p)),console.log("Local Storage Updated!"))}));const m=new class{#t=new i;constructor(){this.pageTitle=document.querySelector("h2"),this.navButton=document.querySelector("nav"),this.actionButtons=document.querySelector("#action-buttons"),this.itemsList=document.querySelector("#items-list"),this.dialog=document.querySelector("dialog"),this.form=document.querySelector("form")}displayTodosScreen(t){this.pageTitle.textContent="",this.navButton.textContent="",this.actionButtons.textContent="",this.itemsList.textContent="",this.form.textContent="",this.#t.todoModal(this.#t.todoPropertiesToInject),this.pageTitle.textContent=t.title,this.navButton.textContent="< Back to Projects",this.navButton.addEventListener("click",(t=>{this.displayProjectsScreen(p)}));const e=document.createElement("button");e.textContent="New Todo",this.actionButtons.appendChild(e),e.addEventListener("click",(t=>{this.dialog.showModal()}));const n=document.createElement("div"),o=document.createElement("label");o.textContent="Set as default",o.setAttribute("for","set-as-default-input");const i=document.createElement("input");if(i.setAttribute("type","checkbox"),i.setAttribute("id","set-as-default-input"),t.isDefault()&&(i.checked=!0,i.disabled=!0),i.addEventListener("change",(e=>{"on"===i.value&&(s.publish("updateProjectDefaultStatus",t),i.disabled=!0)})),n.append(o,i),this.actionButtons.appendChild(n),0===t.todoList.length)this.itemsList.textContent="There are no todos here...";else for(let e of t.todoList){const n=document.createElement("li"),o=document.createElement("span");o.textContent=e.title,o.addEventListener("click",(n=>{this.displaySingleTodoScreen(e,t)})),n.appendChild(o);const i=document.createElement("button");i.textContent="delete",i.addEventListener("click",(n=>{s.publish("todoItemDeleted",{todoItem:e,projectItem:t})})),n.appendChild(i),this.itemsList.appendChild(n)}const c=document.querySelector("#checklist-div"),d=document.querySelector("#checklist-input"),r=document.querySelector("#checklist-add-button");r.disabled=!0,d.addEventListener("input",(t=>{d.value.length>0?r.disabled=!1:r.disabled=!0}));const l=document.createElement("ul");c.appendChild(l);const a=[];r.addEventListener("click",(t=>{const e={};e.value=d.value,a.push(e);const n=document.createElement("li");n.textContent=d.value,l.appendChild(n),d.value="",d.focus()})),document.querySelector("#todo-project-modal #done-button").addEventListener("click",(e=>{e.preventDefault();const n=new FormData(this.form),o=Object.fromEntries(n.entries());0!==o.title.trim().length?(o.checkList=a,s.publish("todoItemAdded",{todoItem:o,projectItem:t}),this.form.reset(),this.dialog.close()):document.querySelector("#error-span").textContent="Please enter add a title"})),document.querySelector("#todo-project-modal #close-dialog").addEventListener("click",(()=>{this.dialog.close()}))}displayProjectsScreen(t){this.pageTitle.textContent="",this.navButton.textContent="",this.actionButtons.textContent="",this.itemsList.textContent="",this.form.textContent="",this.#t.projectModal(),this.pageTitle.textContent="All Projects";const e=document.createElement("button");if(e.textContent="New Project",this.actionButtons.appendChild(e),e.addEventListener("click",(t=>{this.dialog.showModal()})),0===t.projectsList.length)this.itemsList.textContent="There are no projects...";else for(let e of t.projectsList){const t=document.createElement("li"),n=document.createElement("span");n.textContent=e.title,n.addEventListener("click",(t=>{this.displayTodosScreen(e)})),t.appendChild(n);const o=document.createElement("button");o.textContent="delete",o.addEventListener("click",(t=>{s.publish("projectItemDeleted",e)})),t.appendChild(o),this.itemsList.appendChild(t)}document.querySelector("#todo-project-modal #done-button").addEventListener("click",(t=>{t.preventDefault();const e=new FormData(this.form),n=Object.fromEntries(e.entries());0!==n.title.trim().length?(s.publish("projectItemAdded",n),this.form.reset(),this.dialog.close()):document.querySelector("#error-span").textContent="Please type the project name"})),document.querySelector("#todo-project-modal #close-dialog").addEventListener("click",(()=>{this.dialog.close()}))}displaySingleTodoScreen(t,e){this.pageTitle.textContent="",this.navButton.textContent="",this.actionButtons.textContent="",this.itemsList.textContent="",this.form.textContent="",this.pageTitle.textContent=t.title,this.navButton.textContent="< Back to Todos list",this.navButton.addEventListener("click",(t=>{this.displayTodosScreen(e)}));const n=document.createElement("button");n.textContent="Edit",this.actionButtons.appendChild(n),n.addEventListener("click",(o=>{if("Edit"===n.textContent){n.textContent="Save changes",this.itemsList.textContent="";for(let e of this.#t.todoPropertiesToInject)if("Title"===e.name)this.pageTitle.textContent="",this.pageTitle.appendChild(e.displayDetailsFromTodoAsEditable(t));else{if("Checklist"===e.name)continue;this.itemsList.appendChild(e.displayDetailsFromTodoAsEditable(t))}const e=document.createElement("span");e.setAttribute("id","error-span"),e.textContent="",this.itemsList.appendChild(e)}else{const n=document.querySelector("#title-input"),o=document.querySelector("#description"),i=document.querySelector("#due-date"),c=document.querySelector("#priority"),d=document.querySelector("#notes");if(0===n.value.trim().length)return void(document.querySelector("#error-span").textContent="Todo must have a title");t.title=n.value,t.description=o.value,t.dueDate=i.value,t.priority=c.value,t.notes=d.value,this.displaySingleTodoScreen(t,e),s.publish("localStorageUpdated")}}));for(let n of this.#t.todoPropertiesToInject)"Title"!==n.name&&this.itemsList.appendChild(n.displayElementsWithContentForTodoScreen(t,e));const o=document.querySelector("#checklist-add-button-todo"),i=document.querySelector("#checklist-input-todo");o.disabled=!0,i.addEventListener("input",(t=>{i.value.length>0?o.disabled=!1:o.disabled=!0})),o.addEventListener("click",(n=>{let o=i.value;s.publish("checklistItemAdded",{checklistItem:o,todoItem:t,projectItem:e})}))}};let p;if(localStorage.getItem("allProjects")){p=function(t){const s=JSON.parse(localStorage.getItem("allProjects")),i=new o;for(let t of s.projectsList){const o=new n;for(let n of t.todoList){const t=new e;for(let e of n.checkList){const n=e;t.addChecklistItem(n,e.state)}for(let e in n)"checkList"!==e&&(t[e]=n[e]);o.addTodo(t)}for(let e in t)"todoList"!==e&&(o[e]=t[e]);i.addProject(o)}return i}(),console.log(p);for(let t of p.projectsList)if(t.isDefault){m.displayTodosScreen(t);break}}else{p=new o;const t=new n;t.setDefaultStatus(!0),t.title="My Project",s.publish("projectItemAdded",t),m.displayTodosScreen(t)}function h({checklistItem:t,todoItem:e,projectItem:n}){m.displaySingleTodoScreen(e,n),s.publish("localStorageUpdated")}function b({todoItem:t,projectItem:e}){m.displayTodosScreen(e),s.publish("localStorageUpdated")}function f(){m.displayProjectsScreen(p),s.publish("localStorageUpdated")}})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TTJKLEVBQXdCRCxFQUM5QkQsRUFBaUJ4SixpQkFBaUIwSixFQUF1QkQsRUFBaUJ2SixNQUM5RSxDQUdBLElBQUssSUFBSTBJLEtBQWdCVyxFQUNBLGNBQWpCWCxJQUdBWSxFQUFpQlosR0FBZ0JXLEVBQVlYLElBSXJEVSxFQUFvQnZJLFFBQVF5SSxFQUNoQyxDQUdBLElBQUssSUFBSUcsS0FBbUJOLEVBQ0EsYUFBcEJNLElBR0FMLEVBQW9CSyxHQUFtQk4sRUFBZU0sSUFJOURQLEVBQXNCaEksV0FBV2tJLEVBQ3JDLENBQ0EsT0FBT0YsQ0FDWCxDSE9rQlEsR0FDZG5FLFFBQVFDLElBQUlKLEdBQ1osSUFBSyxJQUFJakUsS0FBV2lFLEVBQVluRSxhQUM1QixHQUFJRSxFQUFRVCxVQUFXLENBQ25CZ0csRUFBa0JNLG1CQUFtQjdGLEdBQ3JDLEtBQ0osQ0FFUixLQXBCMEMsQ0FFdENpRSxFQUFjLElBQUlwRSxFQUdsQixNQUFNMkksRUFBc0IsSUFBSXBKLEVBQ2hDb0osRUFBb0JoSixrQkFBaUIsR0FDckNnSixFQUFvQm5LLE1BQVEsYUFDNUJ5RixFQUFPeEQsUUFBUSxtQkFBb0JrSSxHQUNuQ2pELEVBQWtCTSxtQkFBbUIyQyxFQUV6QyxDQTZGQSxTQUFTaEUsR0FBdUIsY0FBRWYsRUFBYSxTQUFFbEIsRUFBUSxZQUFFZSxJQUN2RGlDLEVBQWtCYyx3QkFBd0I5RCxFQUFVZSxHQUNwRFEsRUFBT3hELFFBQVEsc0JBQ25CLENBRUEsU0FBU2dFLEdBQWtCLFNBQUMvQixFQUFRLFlBQUVlLElBQ2xDaUMsRUFBa0JNLG1CQUFtQnZDLEdBQ3JDUSxFQUFPeEQsUUFBUSxzQkFDbkIsQ0FFQSxTQUFTaUUsSUFDTGdCLEVBQWtCTyxzQkFBc0I3QixHQUN4Q0gsRUFBT3hELFFBQVEsc0JBQ25CLEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b3AtdG9kby1saXN0L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3RvcC10b2RvLWxpc3Qvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3RvcC10b2RvLWxpc3Qvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly90b3AtdG9kby1saXN0Ly4vc3JjL3RvZG8tcHJvamVjdC1jcmVhdG9ycy5qcyIsIndlYnBhY2s6Ly90b3AtdG9kby1saXN0Ly4vc3JjL3B1YnN1Yi5qcyIsIndlYnBhY2s6Ly90b3AtdG9kby1saXN0Ly4vc3JjL0RPTS1mb3JtLXRvZG9zY3JlZW4uanMiLCJ3ZWJwYWNrOi8vdG9wLXRvZG8tbGlzdC8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly90b3AtdG9kby1saXN0Ly4vc3JjL3N0b3JhZ2UtdmFsaWRhdG9yLmpzIiwid2VicGFjazovL3RvcC10b2RvLWxpc3QvLi9zcmMvRE9NLmpzIiwid2VicGFjazovL3RvcC10b2RvLWxpc3QvLi9zcmMvc3RvcmFnZS1yZWNvdmVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiZXhwb3J0IHsgVG9kb0l0ZW0sIFByb2plY3RJdGVtLCBBbGxQcm9qZWN0cyB9O1xuXG5jbGFzcyBUb2RvSXRlbSB7XG4gICAgXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMudGl0bGU7XG4gICAgICAgIHRoaXMuZGVzY3JpcHRpb247XG4gICAgICAgIHRoaXMuZHVlRGF0ZTtcbiAgICAgICAgdGhpcy5wcmlvcml0eTtcbiAgICAgICAgdGhpcy5ub3RlcztcbiAgICAgICAgdGhpcy5jaGVja0xpc3QgPSBbXTtcbiAgICAgICAgLy8gVE9ETyBMQVRFUjogQWRkIGltYWdlc1xuICAgIH1cblxuICAgIGFkZENoZWNrbGlzdEl0ZW0oaXRlbSwgc3RhdGUpIHtcbiAgICAgICAgY29uc3Qgb2JqZWN0ID0ge307XG4gICAgICAgIG9iamVjdC52YWx1ZSA9IGl0ZW07XG4gICAgICAgIGlmIChzdGF0ZSkge1xuICAgICAgICAgICAgb2JqZWN0LnN0YXRlID0gc3RhdGU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBvYmplY3Quc3RhdGUgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdGhpcy5jaGVja0xpc3QucHVzaChvYmplY3QpO1xuICAgIH1cbiAgICByZW1vdmVDaGVja2xpc3RJdGVtKGl0ZW0pIHtcbiAgICAgICAgdGhpcy5jaGVja0xpc3Quc3BsaWNlKHRoaXMuY2hlY2tMaXN0LmluZGV4T2YoaXRlbSksIDEpO1xuICAgIH1cbiAgICAvLyBUT0RPOiByZW1vdmUgY2hlY2tsaXN0IGl0ZW1cbn1cblxuY2xhc3MgUHJvamVjdEl0ZW0ge1xuICAgIFxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLl9kZWZhdWx0U3RhdHVzID0gZmFsc2U7XG4gICAgICAgIHRoaXMudGl0bGU7XG4gICAgICAgIHRoaXMudG9kb0xpc3QgPSBbXTtcbiAgICAgICAgXG4gICAgfVxuXG4gICAgaXNEZWZhdWx0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmYXVsdFN0YXR1cztcbiAgICB9XG5cbiAgICBzZXREZWZhdWx0U3RhdHVzKGJvb2wpIHtcbiAgICAgICAgdGhpcy5fZGVmYXVsdFN0YXR1cyA9IGJvb2w7XG4gICAgfVxuXG4gICAgYWRkVG9kbyh0b2RvKSB7XG4gICAgICAgIHRoaXMudG9kb0xpc3QucHVzaCh0b2RvKTtcbiAgICB9XG4gICAgcmVtb3ZlVG9kbyh0b2RvKSB7XG4gICAgICAgIHRoaXMudG9kb0xpc3Quc3BsaWNlKHRoaXMudG9kb0xpc3QuaW5kZXhPZih0b2RvKSwgMSk7XG4gICAgfVxufVxuXG5jbGFzcyBBbGxQcm9qZWN0cyB7XG4gICAgcHJvamVjdHNMaXN0ID0gW107XG4gICAgYWRkUHJvamVjdChwcm9qZWN0KSB7XG4gICAgICAgIHRoaXMucHJvamVjdHNMaXN0LnB1c2gocHJvamVjdCk7XG4gICAgfVxuXG4gICAgcmVtb3ZlUHJvamVjdChwcm9qZWN0KSB7XG4gICAgICAgIHRoaXMucHJvamVjdHNMaXN0LnNwbGljZSh0aGlzLnByb2plY3RzTGlzdC5pbmRleE9mKHByb2plY3QpLCAxKTtcbiAgICB9XG59XG5cblxuXG5cblxuIiwiZXhwb3J0IGRlZmF1bHQge1xuICAgIGV2ZW50czoge30sXG4gICAgc3Vic2NyaWJlOiBmdW5jdGlvbihldmVudCwgY2FsbGJhY2spIHtcbiAgICAgICAgdGhpcy5ldmVudHNbZXZlbnRdID0gdGhpcy5ldmVudHNbZXZlbnRdIHx8IFtdO1xuICAgICAgICB0aGlzLmV2ZW50c1tldmVudF0ucHVzaChjYWxsYmFjayk7XG4gICAgfSxcblxuICAgIHB1Ymxpc2g6IGZ1bmN0aW9uKGV2ZW50LCBkYXRhKSB7XG4gICAgICAgIGlmICghdGhpcy5ldmVudHNbZXZlbnRdKSByZXR1cm47XG4gICAgICAgIHRoaXMuZXZlbnRzW2V2ZW50XS5mb3JFYWNoKGNhbGxiYWNrID0+IHtcbiAgICAgICAgICAgIGNhbGxiYWNrKGRhdGEpO1xuICAgICAgICB9KVxuICAgIH0sXG59IiwiaW1wb3J0IHB1YnN1YiBmcm9tIFwiLi9wdWJzdWJcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTmV3TW9kYWxGb3JtIHtcbiAgICBcbiAgICBwcm9qZWN0TW9kYWwoKSB7XG4gICAgICAgIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtJyk7XG4gICAgICAgIGZvcm0udGV4dENvbnRlbnQgPSAnJztcblxuICAgICAgICBjb25zdCB0aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7XG4gICAgICAgIHRpdGxlLnRleHRDb250ZW50ID0gJ1RpdGxlOic7XG4gICAgICAgIGNvbnN0IHRpdGxlSW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgICB0aXRsZUlucHV0LnNldEF0dHJpYnV0ZSgnbmFtZScsICd0aXRsZScpO1xuICAgICAgICB0aXRsZUlucHV0LnNldEF0dHJpYnV0ZSgnaWQnLCAndGl0bGUnKTtcbiAgICAgICAgdGl0bGVJbnB1dC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAndGV4dCcpO1xuXG4gICAgICAgIGNvbnN0IGlzRGVmYXVsdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7XG4gICAgICAgIGlzRGVmYXVsdC50ZXh0Q29udGVudCA9ICdTZXQgYXMgZGVmYXVsdCc7XG4gICAgICAgIGNvbnN0IGlzRGVmYXVsdElucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICAgICAgaXNEZWZhdWx0SW5wdXQuc2V0QXR0cmlidXRlKCduYW1lJywgJ2lzZGVmYXVsdCcpO1xuICAgICAgICBpc0RlZmF1bHRJbnB1dC5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2lzZGVmYXVsdCcpO1xuICAgICAgICBpc0RlZmF1bHRJbnB1dC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAnY2hlY2tib3gnKTtcbiAgICAgICAgXG5cbiAgICAgICAgY29uc3QgZG9uZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICBkb25lQnV0dG9uLnRleHRDb250ZW50ID0gJ0RvbmUnO1xuICAgICAgICBkb25lQnV0dG9uLnNldEF0dHJpYnV0ZSgnaWQnLCAnZG9uZS1idXR0b24nKTtcblxuICAgICAgICBjb25zdCBjbG9zZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICBjbG9zZUJ1dHRvbi50ZXh0Q29udGVudCA9ICdDYW5jZWwnO1xuICAgICAgICBjbG9zZUJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2Nsb3NlLWRpYWxvZycpO1xuICAgICAgICBjbG9zZUJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2Zvcm1tZXRob2QnLCAnZGlhbG9nJyk7XG4gICAgICAgIGNsb3NlQnV0dG9uLnNldEF0dHJpYnV0ZSgndHlwZScsICdidXR0b24nKTtcblxuICAgICAgICBjb25zdCBlcnJvclNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICAgIGVycm9yU3Bhbi5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2Vycm9yLXNwYW4nKTtcblxuICAgICAgICByZXR1cm4gZm9ybS5hcHBlbmQodGl0bGUsIHRpdGxlSW5wdXQsIGlzRGVmYXVsdCwgaXNEZWZhdWx0SW5wdXQsIGRvbmVCdXR0b24sIGNsb3NlQnV0dG9uLCBlcnJvclNwYW4pO1xuICAgIH1cblxuICAgIHRvZG9Qcm9wZXJ0aWVzVG9JbmplY3QgPSBbXG4gICAgICAgIG5ldyBUb2RvVGl0bGUoKSxcbiAgICAgICAgbmV3IFRvZG9EZXNjcmlwdGlvbigpLFxuICAgICAgICBuZXcgVG9kb0R1ZURhdGUoKSxcbiAgICAgICAgbmV3IFRvZG9Qcmlvcml0eSgpLFxuICAgICAgICBuZXcgVG9kb05vdGVzKCksXG4gICAgICAgIG5ldyBUb2RvQ2hlY2tsaXN0KCksXG4gICAgXVxuXG4gICAgdG9kb01vZGFsKHByb3BlcnRpZXMpIHtcbiAgICAgICAgLy8gQ2xlYXIgdGhlIGZvcm1cbiAgICAgICAgY29uc3QgZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Zvcm0nKTtcbiAgICAgICAgZm9ybS50ZXh0Q29udGVudCA9ICcnO1xuICAgICAgICAvL1xuICAgICAgICBmb3IgKGxldCBwcm9wZXJ0eSBvZiBwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICBjb25zdCBsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7XG4gICAgICAgICAgICBsYWJlbC50ZXh0Q29udGVudCA9IHByb3BlcnR5Lm5hbWU7XG4gICAgICAgICAgICBsYWJlbC5zZXRBdHRyaWJ1dGUoJ2ZvcicsIHByb3BlcnR5Lm5hbWVBc0hUTUxBdHRyaWJ1dGUpO1xuXG4gICAgICAgICAgICBmb3JtLmFwcGVuZChsYWJlbCwgcHJvcGVydHkuY3JlYXRlSW5wdXRFbGVtZW50c0ZvckZvcm0oKSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBkb25lQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgIGRvbmVCdXR0b24udGV4dENvbnRlbnQgPSAnRG9uZSc7XG4gICAgICAgIGRvbmVCdXR0b24uc2V0QXR0cmlidXRlKCdpZCcsICdkb25lLWJ1dHRvbicpO1xuICAgICAgICBkb25lQnV0dG9uLnNldEF0dHJpYnV0ZSgndHlwZScsICdzdWJtaXQnKTtcblxuICAgICAgICBjb25zdCBjbG9zZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICBjbG9zZUJ1dHRvbi50ZXh0Q29udGVudCA9ICdDYW5jZWwnO1xuICAgICAgICBjbG9zZUJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2Nsb3NlLWRpYWxvZycpO1xuICAgICAgICBjbG9zZUJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2Zvcm1tZXRob2QnLCAnZGlhbG9nJyk7XG4gICAgICAgIGNsb3NlQnV0dG9uLnNldEF0dHJpYnV0ZSgndHlwZScsICdidXR0b24nKTtcblxuICAgICAgICBjb25zdCBlcnJvclNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICAgIGVycm9yU3Bhbi5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2Vycm9yLXNwYW4nKTtcblxuICAgICAgICBmb3JtLmFwcGVuZChkb25lQnV0dG9uLCBjbG9zZUJ1dHRvbiwgZXJyb3JTcGFuKTtcbiAgICB9XG5cbn1cblxuLy8gSW50ZXJmYWNlcyA/KHN0aWxsIG5vdCBzdXJlIHdoYXQgdGhpcyB0ZXJtIG1lYW5zKS4gRWFjaCBpbnN0YW5jZSBzaG91bGQgYmUgcGFzc2VkIHRvIHRoZSB0b2RvKCkgbWV0aG9kXG5jbGFzcyBUb2RvVGl0bGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLm5hbWUgPSAnVGl0bGUnO1xuICAgICAgICB0aGlzLm5hbWVBc0hUTUxBdHRyaWJ1dGUgPSAndGl0bGUnO1xuICAgIH1cbiAgICBcbiAgICBjcmVhdGVJbnB1dEVsZW1lbnRzRm9yRm9ybSgpIHtcbiAgICAgICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAndGV4dCcpO1xuICAgICAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoJ2lkJywgdGhpcy5uYW1lQXNIVE1MQXR0cmlidXRlKTtcbiAgICAgICAgaW5wdXQuc2V0QXR0cmlidXRlKCduYW1lJywgdGhpcy5uYW1lQXNIVE1MQXR0cmlidXRlKTtcbiAgICAgICAgcmV0dXJuIGlucHV0O1xuICAgIH1cbiAgICAvLyBUaGUgdGl0bGUgd29uJ3QgYmUgcmVuZGVyZWQgYXMgYW4gaXRlbSBpbiB0aGUgU2luZ2xlIFRvZG8gc2NyZWVuIGFzIGl0IHdpbGwgYmUgdGhlIFRpdGxlIG9mIHRoZSB3aG9sZSBwYWdlIGluc3RlYWQuIFRoaXMgaXMgd2h5IHRoaXMgb25lIHdpbGwgYmUgc2tpcHBlZCB3aGVuIGl0ZXJhdGluZyB0aGUgcHJvcGVydGllcyBpbmplY3RlZCBpbiBET00uanNcblxuICAgIGRpc3BsYXlEZXRhaWxzRnJvbVRvZG9Bc0VkaXRhYmxlKHRvZG9JdGVtKSB7XG4gICAgICAgIGNvbnN0IHRpdGxlSW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgICB0aXRsZUlucHV0LnNldEF0dHJpYnV0ZSgndHlwZScsICd0ZXh0Jyk7XG4gICAgICAgIHRpdGxlSW5wdXQuc2V0QXR0cmlidXRlKCdpZCcsICd0aXRsZS1pbnB1dCcpO1xuICAgICAgICBcblxuICAgICAgICAvLyBQcmUtZmlsbCBpbnB1dCBmaWVsZHMgd2l0aCBzYXZlZCBkYXRhXG4gICAgICAgIHRpdGxlSW5wdXQudmFsdWUgPSB0b2RvSXRlbS50aXRsZTtcbiAgICAgICAgcmV0dXJuIHRpdGxlSW5wdXQ7XG4gICAgfVxufVxuXG5jbGFzcyBUb2RvRGVzY3JpcHRpb24ge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLm5hbWUgPSAnRGVzY3JpcHRpb24nO1xuICAgICAgICB0aGlzLm5hbWVBc0hUTUxBdHRyaWJ1dGUgPSAnZGVzY3JpcHRpb24nO1xuICAgIH1cbiAgICBcbiAgICBjcmVhdGVJbnB1dEVsZW1lbnRzRm9yRm9ybSgpIHtcbiAgICAgICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZXh0YXJlYScpO1xuICAgICAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoJ2lkJywgdGhpcy5uYW1lQXNIVE1MQXR0cmlidXRlKTtcbiAgICAgICAgaW5wdXQuc2V0QXR0cmlidXRlKCduYW1lJywgdGhpcy5uYW1lQXNIVE1MQXR0cmlidXRlKTtcbiAgICAgICAgcmV0dXJuIGlucHV0O1xuICAgIH1cblxuICAgIGRpc3BsYXlFbGVtZW50c1dpdGhDb250ZW50Rm9yVG9kb1NjcmVlbih0b2RvSXRlbSkge1xuICAgICAgICBjb25zdCBmaWVsZHNldCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ZpZWxkc2V0Jyk7XG4gICAgICAgIGNvbnN0IGxlZ2VuZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xlZ2VuZCcpO1xuICAgICAgICBsZWdlbmQudGV4dENvbnRlbnQgPSB0aGlzLm5hbWU7XG4gICAgICAgIGZpZWxkc2V0LmFwcGVuZENoaWxkKGxlZ2VuZCk7XG5cbiAgICAgICAgY29uc3QgcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgICAgICAgcC50ZXh0Q29udGVudCA9IHRvZG9JdGVtLmRlc2NyaXB0aW9uO1xuICAgICAgICBmaWVsZHNldC5hcHBlbmRDaGlsZChwKTtcblxuICAgICAgICByZXR1cm4gZmllbGRzZXQ7XG4gICAgfVxuXG4gICAgZGlzcGxheURldGFpbHNGcm9tVG9kb0FzRWRpdGFibGUodG9kb0l0ZW0pIHtcbiAgICAgICAgY29uc3QgZmllbGRzZXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdmaWVsZHNldCcpO1xuICAgICAgICBjb25zdCBsZWdlbmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsZWdlbmQnKTtcbiAgICAgICAgbGVnZW5kLnRleHRDb250ZW50ID0gdGhpcy5uYW1lO1xuICAgICAgICBmaWVsZHNldC5hcHBlbmRDaGlsZChsZWdlbmQpO1xuXG4gICAgICAgIGNvbnN0IGlucHV0ID0gdGhpcy5jcmVhdGVJbnB1dEVsZW1lbnRzRm9yRm9ybSgpO1xuICAgICAgICBmaWVsZHNldC5hcHBlbmRDaGlsZChpbnB1dCk7XG5cbiAgICAgICAgLy8gUHJlLWZpbGwgaW5wdXQgZmllbGRzIHdpdGggc2F2ZWQgZGF0YSAgICAgICAgXG4gICAgICAgIGlucHV0LnRleHRDb250ZW50ID0gdG9kb0l0ZW0uZGVzY3JpcHRpb247XG4gICAgICAgIHJldHVybiBmaWVsZHNldDtcbiAgICB9XG59XG5cbmNsYXNzIFRvZG9EdWVEYXRlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5uYW1lID0gJ0R1ZSBEYXRlJztcbiAgICAgICAgdGhpcy5uYW1lQXNIVE1MQXR0cmlidXRlID0gJ2R1ZS1kYXRlJztcbiAgICB9XG4gICAgY3JlYXRlSW5wdXRFbGVtZW50c0ZvckZvcm0oKSB7XG4gICAgICAgIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICAgICAgaW5wdXQuc2V0QXR0cmlidXRlKCd0eXBlJywgJ2RhdGUnKTtcbiAgICAgICAgaW5wdXQuc2V0QXR0cmlidXRlKCdpZCcsIHRoaXMubmFtZUFzSFRNTEF0dHJpYnV0ZSk7XG4gICAgICAgIGlucHV0LnNldEF0dHJpYnV0ZSgnbmFtZScsIHRoaXMubmFtZUFzSFRNTEF0dHJpYnV0ZSk7XG4gICAgICAgIHJldHVybiBpbnB1dDtcbiAgICB9XG5cbiAgICBkaXNwbGF5RWxlbWVudHNXaXRoQ29udGVudEZvclRvZG9TY3JlZW4odG9kb0l0ZW0pIHtcbiAgICAgICAgY29uc3QgZmllbGRzZXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdmaWVsZHNldCcpOyAvLyB0aGlzIGlzIHdoYXQgaXMgZXhwZWN0ZWQgdG8gYmUgcmV0dXJuZWRcbiAgICAgICAgY29uc3QgbGVnZW5kID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGVnZW5kJyk7XG4gICAgICAgIGxlZ2VuZC50ZXh0Q29udGVudCA9IHRoaXMubmFtZTtcbiAgICAgICAgZmllbGRzZXQuYXBwZW5kQ2hpbGQobGVnZW5kKTtcblxuICAgICAgICBjb25zdCBwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICAgICAgICBwLnRleHRDb250ZW50ID0gdG9kb0l0ZW0uZHVlRGF0ZTtcbiAgICAgICAgZmllbGRzZXQuYXBwZW5kQ2hpbGQocCk7XG5cbiAgICAgICAgcmV0dXJuIGZpZWxkc2V0O1xuICAgIH1cblxuICAgIGRpc3BsYXlEZXRhaWxzRnJvbVRvZG9Bc0VkaXRhYmxlKHRvZG9JdGVtKSB7XG4gICAgICAgIGNvbnN0IGZpZWxkc2V0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZmllbGRzZXQnKTtcbiAgICAgICAgY29uc3QgbGVnZW5kID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGVnZW5kJyk7XG4gICAgICAgIGxlZ2VuZC50ZXh0Q29udGVudCA9IHRoaXMubmFtZTtcbiAgICAgICAgZmllbGRzZXQuYXBwZW5kQ2hpbGQobGVnZW5kKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGlucHV0ID0gdGhpcy5jcmVhdGVJbnB1dEVsZW1lbnRzRm9yRm9ybSgpO1xuICAgICAgICBmaWVsZHNldC5hcHBlbmRDaGlsZChpbnB1dCk7XG5cbiAgICAgICAgLy8gUHJlLWZpbGwgaW5wdXQgZmllbGRzIHdpdGggc2F2ZWQgZGF0YVxuICAgICAgICBpbnB1dC52YWx1ZSA9IHRvZG9JdGVtLmR1ZURhdGU7XG4gICAgICAgIHJldHVybiBmaWVsZHNldDtcbiAgICB9XG59XG5cbmNsYXNzIFRvZG9Qcmlvcml0eSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMubmFtZSA9ICdQcmlvcml0eSc7XG4gICAgICAgIHRoaXMubmFtZUFzSFRNTEF0dHJpYnV0ZSA9ICdwcmlvcml0eSc7XG4gICAgfVxuICAgIGNyZWF0ZUlucHV0RWxlbWVudHNGb3JGb3JtKCkge1xuICAgICAgICBjb25zdCBzZWxlY3QgPSBjcmVhdGVTZWxlY3RXaXRoUHJpb3JpdHlPcHRpb25zKCk7XG4gICAgICAgIHNlbGVjdC5zZXRBdHRyaWJ1dGUoJ2lkJywgdGhpcy5uYW1lQXNIVE1MQXR0cmlidXRlKTtcbiAgICAgICAgc2VsZWN0LnNldEF0dHJpYnV0ZSgnbmFtZScsIHRoaXMubmFtZUFzSFRNTEF0dHJpYnV0ZSk7XG4gICAgICAgIHJldHVybiBzZWxlY3Q7XG4gICAgfVxuXG4gICAgZGlzcGxheUVsZW1lbnRzV2l0aENvbnRlbnRGb3JUb2RvU2NyZWVuKHRvZG9JdGVtKSB7XG4gICAgICAgIGNvbnN0IGZpZWxkc2V0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZmllbGRzZXQnKTsgLy8gdGhpcyBpcyB3aGF0IGlzIGV4cGVjdGVkIHRvIGJlIHJldHVybmVkXG4gICAgICAgIGNvbnN0IGxlZ2VuZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xlZ2VuZCcpO1xuICAgICAgICBsZWdlbmQudGV4dENvbnRlbnQgPSB0aGlzLm5hbWU7XG4gICAgICAgIGZpZWxkc2V0LmFwcGVuZENoaWxkKGxlZ2VuZCk7XG5cbiAgICAgICAgY29uc3QgcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgICAgICAgcC50ZXh0Q29udGVudCA9IHRvZG9JdGVtLnByaW9yaXR5O1xuICAgICAgICBmaWVsZHNldC5hcHBlbmRDaGlsZChwKTtcblxuICAgICAgICByZXR1cm4gZmllbGRzZXQ7XG4gICAgfVxuXG4gICAgZGlzcGxheURldGFpbHNGcm9tVG9kb0FzRWRpdGFibGUodG9kb0l0ZW0pIHtcbiAgICAgICAgY29uc3QgZmllbGRzZXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdmaWVsZHNldCcpO1xuICAgICAgICBjb25zdCBsZWdlbmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsZWdlbmQnKTtcbiAgICAgICAgbGVnZW5kLnRleHRDb250ZW50ID0gdGhpcy5uYW1lO1xuICAgICAgICBmaWVsZHNldC5hcHBlbmRDaGlsZChsZWdlbmQpO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgaW5wdXQgPSB0aGlzLmNyZWF0ZUlucHV0RWxlbWVudHNGb3JGb3JtKCk7XG4gICAgICAgIGZpZWxkc2V0LmFwcGVuZENoaWxkKGlucHV0KTtcblxuICAgICAgICAvLyBQcmUtZmlsbCBpbnB1dCBmaWVsZHMgd2l0aCBzYXZlZCBkYXRhXG4gICAgICAgIGlucHV0LnZhbHVlID0gdG9kb0l0ZW0ucHJpb3JpdHk7XG4gICAgICAgIHJldHVybiBmaWVsZHNldDtcbiAgICB9XG59XG5cbmNsYXNzIFRvZG9Ob3RlcyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMubmFtZSA9ICdOb3Rlcyc7XG4gICAgICAgIHRoaXMubmFtZUFzSFRNTEF0dHJpYnV0ZSA9ICdub3Rlcyc7XG4gICAgfVxuICAgIGNyZWF0ZUlucHV0RWxlbWVudHNGb3JGb3JtKCkge1xuICAgICAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RleHRhcmVhJyk7XG4gICAgICAgIGlucHV0LnNldEF0dHJpYnV0ZSgnaWQnLCB0aGlzLm5hbWVBc0hUTUxBdHRyaWJ1dGUpO1xuICAgICAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoJ25hbWUnLCB0aGlzLm5hbWVBc0hUTUxBdHRyaWJ1dGUpO1xuICAgICAgICByZXR1cm4gaW5wdXQ7XG4gICAgfVxuXG4gICAgZGlzcGxheUVsZW1lbnRzV2l0aENvbnRlbnRGb3JUb2RvU2NyZWVuKHRvZG9JdGVtKSB7XG4gICAgICAgIGNvbnN0IGZpZWxkc2V0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZmllbGRzZXQnKTsgLy8gdGhpcyBpcyB3aGF0IGlzIGV4cGVjdGVkIHRvIGJlIHJldHVybmVkXG4gICAgICAgIGNvbnN0IGxlZ2VuZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xlZ2VuZCcpO1xuICAgICAgICBsZWdlbmQudGV4dENvbnRlbnQgPSB0aGlzLm5hbWU7XG4gICAgICAgIGZpZWxkc2V0LmFwcGVuZENoaWxkKGxlZ2VuZCk7XG5cbiAgICAgICAgY29uc3QgcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgICAgICAgcC50ZXh0Q29udGVudCA9IHRvZG9JdGVtLm5vdGVzO1xuICAgICAgICBmaWVsZHNldC5hcHBlbmRDaGlsZChwKTtcblxuICAgICAgICByZXR1cm4gZmllbGRzZXQ7XG4gICAgfVxuXG4gICAgZGlzcGxheURldGFpbHNGcm9tVG9kb0FzRWRpdGFibGUodG9kb0l0ZW0pIHtcbiAgICAgICAgY29uc3QgZmllbGRzZXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdmaWVsZHNldCcpO1xuICAgICAgICBjb25zdCBsZWdlbmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsZWdlbmQnKTtcbiAgICAgICAgbGVnZW5kLnRleHRDb250ZW50ID0gdGhpcy5uYW1lO1xuICAgICAgICBmaWVsZHNldC5hcHBlbmRDaGlsZChsZWdlbmQpO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgaW5wdXQgPSB0aGlzLmNyZWF0ZUlucHV0RWxlbWVudHNGb3JGb3JtKCk7XG4gICAgICAgIGZpZWxkc2V0LmFwcGVuZENoaWxkKGlucHV0KTtcblxuICAgICAgICAvLyBQcmUtZmlsbCBpbnB1dCBmaWVsZHMgd2l0aCBzYXZlZCBkYXRhXG4gICAgICAgIGlucHV0LnRleHRDb250ZW50ID0gdG9kb0l0ZW0ubm90ZXM7XG4gICAgICAgIHJldHVybiBmaWVsZHNldDtcbiAgICB9XG59XG5cbmNsYXNzIFRvZG9DaGVja2xpc3Qge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLm5hbWUgPSAnQ2hlY2tsaXN0JztcbiAgICAgICAgdGhpcy5uYW1lQXNIVE1MQXR0cmlidXRlID0gJ2NoZWNrbGlzdC1pbnB1dCc7XG4gICAgfVxuICAgIGNyZWF0ZUlucHV0RWxlbWVudHNGb3JGb3JtKCkge1xuICAgICAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgZGl2LnNldEF0dHJpYnV0ZSgnaWQnLCAnY2hlY2tsaXN0LWRpdicpO1xuXG4gICAgICAgIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICAgICAgaW5wdXQuc2V0QXR0cmlidXRlKCd0eXBlJywgJ3RleHQnKTtcbiAgICAgICAgaW5wdXQuc2V0QXR0cmlidXRlKCdpZCcsIHRoaXMubmFtZUFzSFRNTEF0dHJpYnV0ZSk7XG4gICAgICAgIC8vIGlucHV0LnNldEF0dHJpYnV0ZSgnbmFtZScsIHRoaXMubmFtZUFzSFRNTEF0dHJpYnV0ZSk7IElHTk9SRUQsIFRPIENPTkZJUk0hXG5cbiAgICAgICAgY29uc3QgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9ICdBZGQnO1xuICAgICAgICBidXR0b24uc2V0QXR0cmlidXRlKCd0eXBlJywgJ2J1dHRvbicpO1xuICAgICAgICBidXR0b24uc2V0QXR0cmlidXRlKCdpZCcsICdjaGVja2xpc3QtYWRkLWJ1dHRvbicpO1xuXG4gICAgICAgIGRpdi5hcHBlbmQoaW5wdXQsIGJ1dHRvbik7XG4gICAgICAgIHJldHVybiBkaXY7XG4gICAgfVxuXG4gICAgZGlzcGxheUVsZW1lbnRzV2l0aENvbnRlbnRGb3JUb2RvU2NyZWVuKHRvZG9JdGVtLCBwcm9qZWN0SXRlbSkge1xuICAgICAgICBjb25zdCBmaWVsZHNldCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ZpZWxkc2V0Jyk7IC8vIHRoaXMgaXMgd2hhdCBpcyBleHBlY3RlZCB0byBiZSByZXR1cm5lZFxuICAgICAgICBmaWVsZHNldC5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2NoZWNrbGlzdC1maWVsZHNldCcpO1xuICAgICAgICBjb25zdCBsZWdlbmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsZWdlbmQnKTtcbiAgICAgICAgbGVnZW5kLnRleHRDb250ZW50ID0gdGhpcy5uYW1lO1xuICAgICAgICBmaWVsZHNldC5hcHBlbmRDaGlsZChsZWdlbmQpO1xuXG4gICAgICAgIC8vIGFkZCBtb3JlIGNoZWNrbGlzdCBpdGVtc1xuICAgICAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgY29uc3QgY2hlY2tsaXN0SW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgICBjaGVja2xpc3RJbnB1dC5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2NoZWNrbGlzdC1pbnB1dC10b2RvJyk7XG5cbiAgICAgICAgY29uc3QgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9ICdBZGQnO1xuICAgICAgICBidXR0b24uc2V0QXR0cmlidXRlKCdpZCcsICdjaGVja2xpc3QtYWRkLWJ1dHRvbi10b2RvJyk7XG4gICAgICAgIGRpdi5hcHBlbmQoY2hlY2tsaXN0SW5wdXQsIGJ1dHRvbik7XG4gICAgICAgIGZpZWxkc2V0LmFwcGVuZENoaWxkKGRpdik7XG5cbiAgICAgICAgY29uc3QgdWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpO1xuICAgICAgICBmb3IgKGxldCBjaGVja2xpc3RJdGVtIG9mIHRvZG9JdGVtLmNoZWNrTGlzdCkge1xuICAgICAgICAgICAgY29uc3QgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICAgICAgICAgICAgdWwuYXBwZW5kQ2hpbGQobGkpO1xuXG4gICAgICAgICAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgICAgICAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAnY2hlY2tib3gnKTtcbiAgICAgICAgICAgIGlmIChjaGVja2xpc3RJdGVtLnN0YXRlID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgaW5wdXQuY2hlY2tlZCA9IHRydWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlucHV0LmNoZWNrZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGUgPT4geyAvLyBjaGVja2xpc3QgaXRlbXMgYXJlIGNyZWF0ZWQgd2l0aCBhIHN0YXRlIHZhbHVlIG9mICdmYWxzZSc7XG4gICAgICAgICAgICAgICAgaWYgKGNoZWNrbGlzdEl0ZW0uc3RhdGUgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tsaXN0SXRlbS5zdGF0ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNoZWNrbGlzdEl0ZW0uc3RhdGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwdWJzdWIucHVibGlzaCgnbG9jYWxTdG9yYWdlVXBkYXRlZCcpO1xuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgY29uc3QgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpO1xuICAgICAgICAgICAgbGFiZWwudGV4dENvbnRlbnQgPSBjaGVja2xpc3RJdGVtLnZhbHVlO1xuXG4gICAgICAgICAgICBjb25zdCBkZWxldGVDaGVja2xpc3RCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgICAgIGRlbGV0ZUNoZWNrbGlzdEJ1dHRvbi50ZXh0Q29udGVudCA9ICd4JztcblxuICAgICAgICAgICAgZGVsZXRlQ2hlY2tsaXN0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XG4gICAgICAgICAgICAgICAgcHVic3ViLnB1Ymxpc2goJ2NoZWNrbGlzdEl0ZW1EZWxldGVkJywgeyBjaGVja2xpc3RJdGVtLCB0b2RvSXRlbSwgcHJvamVjdEl0ZW0gfSk7XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICBsaS5hcHBlbmQoaW5wdXQsIGxhYmVsLCBkZWxldGVDaGVja2xpc3RCdXR0b24pO1xuICAgICAgICB9XG4gICAgICAgIGZpZWxkc2V0LmFwcGVuZENoaWxkKHVsKTtcblxuICAgICAgICByZXR1cm4gZmllbGRzZXQ7XG4gICAgfVxufVxuXG5cbi8vIFRvZG9Qcmlvcml0eSBIZWxwZXIgZnVuY3Rpb25cbmZ1bmN0aW9uIGNyZWF0ZVNlbGVjdFdpdGhQcmlvcml0eU9wdGlvbnMoKSB7XG4gICAgY29uc3Qgc2VsZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2VsZWN0Jyk7XG4gICAgY29uc3QgcHJpb3JpdGllcyA9IFsnSGlnaCcsICdNZWRpdW0nLCAnTm9ybWFsJ107XG4gICAgLy8gTmVlZCBhIGRlZmF1bHQgb3B0aW9uIGluIGNhc2Ugbm8gcHJpb3JpdHkgaXMgc2VsZWN0ZWRcbiAgICBjb25zdCBkZWZhdWx0T3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7XG4gICAgZGVmYXVsdE9wdGlvbi50ZXh0Q29udGVudCA9ICdTZWxlY3QgYW4gb3B0aW9uJztcbiAgICBkZWZhdWx0T3B0aW9uLnNldEF0dHJpYnV0ZSgndmFsdWUnLCAnJyk7XG4gICAgZGVmYXVsdE9wdGlvbi5zZXRBdHRyaWJ1dGUoJ3NlbGVjdGVkJywgJycpO1xuICAgIHNlbGVjdC5hcHBlbmRDaGlsZChkZWZhdWx0T3B0aW9uKTtcblxuICAgIGZvciAobGV0IHByaW9yaXR5IG9mIHByaW9yaXRpZXMpIHtcbiAgICAgICAgY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7XG4gICAgICAgIG9wdGlvbi50ZXh0Q29udGVudCA9IHByaW9yaXR5O1xuICAgICAgICBvcHRpb24uc2V0QXR0cmlidXRlKCd2YWx1ZScsIHByaW9yaXR5WzBdLnRvTG93ZXJDYXNlKCkgKyBwcmlvcml0eS5zbGljZSgxKSk7XG4gICAgICAgIHNlbGVjdC5hcHBlbmRDaGlsZChvcHRpb24pO1xuICAgIH1cblxuICAgIHJldHVybiBzZWxlY3Q7XG59IiwiaW1wb3J0IHsgVG9kb0l0ZW0sIFByb2plY3RJdGVtLCBBbGxQcm9qZWN0cyB9IGZyb20gJy4vdG9kby1wcm9qZWN0LWNyZWF0b3JzLmpzJztcbmltcG9ydCBwdWJzdWIgZnJvbSAnLi9wdWJzdWIuanMnO1xuaW1wb3J0IERPTUNvbnRyb2xsZXIgZnJvbSAnLi9ET00uanMnXG5pbXBvcnQgc3RvcmFnZUF2YWlsYWJsZSBmcm9tICcuL3N0b3JhZ2UtdmFsaWRhdG9yLmpzJztcbmltcG9ydCByZXRyaWV2ZVN0b3JlZERhdGEgZnJvbSAnLi9zdG9yYWdlLXJlY292ZXIuanMnO1xuXG5leHBvcnQge2FsbFByb2plY3RzfVxuXG4vLyBBZGQgc3Vic2NyaWJlcnNcbnB1YnN1Yi5zdWJzY3JpYmUoJ3RvZG9JdGVtRGVsZXRlZCcsIGRlbGV0ZVRvZG8pOyAvLyAuLi5USElOS0lORyBHRU1OSSBQUk9NUFQgVE8gVU5ERVJTVEFORCBIT1cgVE8gREVMRVRFIEFOIE9CSkVDVCAoVE9ETyBPUiBQUk9KRUNUKVxucHVic3ViLnN1YnNjcmliZSgndG9kb0l0ZW1BZGRlZCcsIGFkZE5ld1RvZG8pO1xuXG5wdWJzdWIuc3Vic2NyaWJlKCdwcm9qZWN0SXRlbURlbGV0ZWQnLCBkZWxldGVQcm9qZWN0KTsgLy8gLi4uVEhJTktJTkcgR0VNTkkgUFJPTVBUIFRPIFVOREVSU1RBTkQgSE9XIFRPIERFTEVURSBBTiBPQkpFQ1QgKFRPRE8gT1IgUFJPSkVDVClcbnB1YnN1Yi5zdWJzY3JpYmUoJ3Byb2plY3RJdGVtQWRkZWQnLCBhZGROZXdQcm9qZWN0KTtcblxucHVic3ViLnN1YnNjcmliZSgndG9kb0l0ZW1BZGRlZCcsIHVwZGF0ZVRvZG9zU2NyZWVuKTtcbnB1YnN1Yi5zdWJzY3JpYmUoJ3RvZG9JdGVtRGVsZXRlZCcsIHVwZGF0ZVRvZG9zU2NyZWVuKTtcblxucHVic3ViLnN1YnNjcmliZSgncHJvamVjdEl0ZW1EZWxldGVkJywgdXBkYXRlUHJvamVjdHNTY3JlZW4pO1xucHVic3ViLnN1YnNjcmliZSgncHJvamVjdEl0ZW1BZGRlZCcsIHVwZGF0ZVByb2plY3RzU2NyZWVuKTtcblxucHVic3ViLnN1YnNjcmliZSgnY2hlY2tsaXN0SXRlbURlbGV0ZWQnLCBkZWxldGVDaGVja2xpc3RJdGVtKTtcbnB1YnN1Yi5zdWJzY3JpYmUoJ2NoZWNrbGlzdEl0ZW1EZWxldGVkJywgdXBkYXRlU2luZ2xlVG9kb1NjcmVlbik7XG5cbnB1YnN1Yi5zdWJzY3JpYmUoJ2NoZWNrbGlzdEl0ZW1BZGRlZCcsIGFkZENoZWNrbGlzdEl0ZW0pO1xucHVic3ViLnN1YnNjcmliZSgnY2hlY2tsaXN0SXRlbUFkZGVkJywgdXBkYXRlU2luZ2xlVG9kb1NjcmVlbik7XG5cbnB1YnN1Yi5zdWJzY3JpYmUoJ3VwZGF0ZVByb2plY3REZWZhdWx0U3RhdHVzJywgdXBkYXRlUHJvamVjdERlZmF1bHRTdGF0dXMpO1xuXG4vLyBQdWJzdWIgZm9yIHN0b3JhZ2UgZXZlbnRzXG5wdWJzdWIuc3Vic2NyaWJlKCdsb2NhbFN0b3JhZ2VVcGRhdGVkJywgdXBkYXRlTG9jYWxTdG9yYWdlKTtcblxuXG4vLyBzaG93IFByb2plY3RYIHNjcmVlbiBieSBkZWZhdWx0XG5jb25zdCBkaXNwbGF5Q29udHJvbGxlciA9IG5ldyBET01Db250cm9sbGVyKCk7XG5cblxuLy8gU1RPUkFHRVxubGV0IGFsbFByb2plY3RzO1xuaWYgKCFsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYWxsUHJvamVjdHMnKSkge1xuICAgIC8vIEluc3RhbnRpYXRlIHRoZSBBbGwgUHJvamVjdHMgY2xhc3Mgb25seSBvbmNlXG4gICAgYWxsUHJvamVjdHMgPSBuZXcgQWxsUHJvamVjdHMoKTtcblxuICAgIC8vIElmIG5vIHByZXZpb3VzIHN0b3JhZ2UgbWFuaXB1bGF0aW9uLCBjcmVhdGUgZGVmYXVsdCBcIk15IFByb2plY3RcIlxuICAgIGNvbnN0IGZpcnN0RGVmYXVsdFByb2plY3QgPSBuZXcgUHJvamVjdEl0ZW0oKTtcbiAgICBmaXJzdERlZmF1bHRQcm9qZWN0LnNldERlZmF1bHRTdGF0dXModHJ1ZSk7XG4gICAgZmlyc3REZWZhdWx0UHJvamVjdC50aXRsZSA9ICdNeSBQcm9qZWN0JztcbiAgICBwdWJzdWIucHVibGlzaCgncHJvamVjdEl0ZW1BZGRlZCcsIGZpcnN0RGVmYXVsdFByb2plY3QpO1xuICAgIGRpc3BsYXlDb250cm9sbGVyLmRpc3BsYXlUb2Rvc1NjcmVlbihmaXJzdERlZmF1bHRQcm9qZWN0KTsgLy8gVE9ETzogbmVlZCB0byBkZWNpZGUgaG93IHRoZSBkZWZhdWx0IHdpbGwgYmUgc2V0IFxuICAgIFxufSBlbHNlIHtcbiAgICBhbGxQcm9qZWN0cyA9IHJldHJpZXZlU3RvcmVkRGF0YSgnYWxsUHJvamVjdHMnKTtcbiAgICBjb25zb2xlLmxvZyhhbGxQcm9qZWN0cyk7XG4gICAgZm9yIChsZXQgcHJvamVjdCBvZiBhbGxQcm9qZWN0cy5wcm9qZWN0c0xpc3QpIHtcbiAgICAgICAgaWYgKHByb2plY3QuaXNEZWZhdWx0KSB7XG4gICAgICAgICAgICBkaXNwbGF5Q29udHJvbGxlci5kaXNwbGF5VG9kb3NTY3JlZW4ocHJvamVjdCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLypcblBFTkRJTkc6XG4tIEFERCBTVE9SQUdFXG4qL1xuXG4vLyBIZWxwZXIgZnVuY3Rpb25zIGZvciBwdWJzdWJcbi8vIEZ1bmN0aW9ucyB0byBjcmVhdGUgbmV3IFRvZG8gb3IgUHJvamVjdCBpdGVtcywgb3IgYWRkIG5ldyBjaGVja2xpc3QgaXRlbXNcbmZ1bmN0aW9uIGFkZE5ld1RvZG8oe3RvZG9JdGVtLCBwcm9qZWN0SXRlbX0pIHtcbiAgICBsZXQgbmV3VG9kb0l0ZW0gPSBuZXcgVG9kb0l0ZW0oKTtcbiAgICBmb3IgKGxldCBwcm9wZXJ0eSBpbiB0b2RvSXRlbSkge1xuICAgICAgICBpZiAocHJvcGVydHkgPT09ICdfc3RhdGUnKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChwcm9wZXJ0eSA9PT0gJ2R1ZS1kYXRlJykgeyAvLyBhcyBIVE1MIGF0dHJpYnV0ZSBmb3IgbmFtZSBpcyAnZHVlLWRhdGUnIHdoZXJlYXMgdG9kb0l0ZW0gcHJvcGVydHkgaXMgJ2R1ZURhdGUnXG4gICAgICAgICAgICAgICAgbmV3VG9kb0l0ZW0uZHVlRGF0ZSA9IHRvZG9JdGVtW3Byb3BlcnR5XTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV3VG9kb0l0ZW1bcHJvcGVydHldID0gdG9kb0l0ZW1bcHJvcGVydHldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgIH1cbiAgICBwcm9qZWN0SXRlbS5hZGRUb2RvKG5ld1RvZG9JdGVtKTtcbiAgICBwdWJzdWIucHVibGlzaCgnbG9jYWxTdG9yYWdlVXBkYXRlZCcpO1xufVxuXG5mdW5jdGlvbiBhZGROZXdQcm9qZWN0KHByb2plY3RJdGVtKSB7XG4gICAgbGV0IG5ld1Byb2plY3RJdGVtID0gbmV3IFByb2plY3RJdGVtKCk7XG4gICAgZm9yIChsZXQgcHJvcGVydHkgaW4gcHJvamVjdEl0ZW0pIHsgLy8gcHJvamVjdEl0ZW0gZG9lcyBub3QgaGF2ZSAjZGVmYXVsdFN0YXR1cyAod2hlbiBwYXNzZWQgZnJvbSBmb3JtKSBPUiBoYXMgaXQgZm9yIGZpcnN0RGVmYXVsdFByb2plY3RcbiAgICAgICAgaWYgKHByb3BlcnR5ID09PSAnX2RlZmF1bHRTdGF0dXMnKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChwcm9wZXJ0eSA9PT0gJ2lzZGVmYXVsdCcpIHtcbiAgICAgICAgICAgICAgICBpZiAocHJvamVjdEl0ZW0uaXNkZWZhdWx0ID09PSAnb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld1Byb2plY3RJdGVtLnNldERlZmF1bHRTdGF0dXModHJ1ZSk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIE5vdyB3ZSBuZWVkIHRvIHNldCB0aGUgUkVTVCBvZiBwcm9qZWN0SXRlbXMgZnJvbSBhbGxQcm9qZWN0cyBhcyBub3QgZGVmYXVsdFxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBwcm9qZWN0IG9mIGFsbFByb2plY3RzLnByb2plY3RzTGlzdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb2plY3QuaXNEZWZhdWx0KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9qZWN0LnNldERlZmF1bHRTdGF0dXMoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHByb2plY3RJdGVtLnRpdGxlLCAncHJvamVjdCBpcyBub3cgdGhlIGRlZmF1bHQnKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBuZXdQcm9qZWN0SXRlbS5zZXREZWZhdWx0U3RhdHVzKGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG5ld1Byb2plY3RJdGVtW3Byb3BlcnR5XSA9IHByb2plY3RJdGVtW3Byb3BlcnR5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAocHJvamVjdEl0ZW0uaXNEZWZhdWx0KSB7IC8vIFRoaXMgc3RhdGVtZW50IG9ubHkgdXNlZnVsIGZvciB0aGUgZmlyc3REZWZhdWx0UHJvamVjdFxuICAgICAgICBwcm9qZWN0SXRlbS5pc0RlZmF1bHQoKSA/IG5ld1Byb2plY3RJdGVtLnNldERlZmF1bHRTdGF0dXModHJ1ZSkgOiBuZXdQcm9qZWN0SXRlbS5zZXREZWZhdWx0U3RhdHVzKGZhbHNlKTtcbiAgICB9XG5cbiAgICBhbGxQcm9qZWN0cy5hZGRQcm9qZWN0KG5ld1Byb2plY3RJdGVtKTtcbiAgICBwdWJzdWIucHVibGlzaCgnbG9jYWxTdG9yYWdlVXBkYXRlZCcpO1xufVxuXG5mdW5jdGlvbiBhZGRDaGVja2xpc3RJdGVtKHsgY2hlY2tsaXN0SXRlbSwgdG9kb0l0ZW0gfSkge1xuICAgIHRvZG9JdGVtLmFkZENoZWNrbGlzdEl0ZW0oY2hlY2tsaXN0SXRlbSk7XG4gICAgcHVic3ViLnB1Ymxpc2goJ2xvY2FsU3RvcmFnZVVwZGF0ZWQnKTtcbn1cblxuLy8gRnVuY3Rpb25zIHRvIGRlbGV0ZSBDaGVja2xpc3QsIFRvZG8gb3IgUHJvamVjdCBpdGVtc1xuZnVuY3Rpb24gZGVsZXRlQ2hlY2tsaXN0SXRlbSh7IGNoZWNrbGlzdEl0ZW0sIHRvZG9JdGVtIH0pIHtcbiAgICB0b2RvSXRlbS5yZW1vdmVDaGVja2xpc3RJdGVtKGNoZWNrbGlzdEl0ZW0pO1xuICAgIHB1YnN1Yi5wdWJsaXNoKCdsb2NhbFN0b3JhZ2VVcGRhdGVkJyk7XG59XG5cbmZ1bmN0aW9uIGRlbGV0ZVByb2plY3QocHJvamVjdEl0ZW0pIHtcbiAgICBhbGxQcm9qZWN0cy5yZW1vdmVQcm9qZWN0KHByb2plY3RJdGVtKTtcbiAgICBwdWJzdWIucHVibGlzaCgnbG9jYWxTdG9yYWdlVXBkYXRlZCcpO1xufVxuXG5mdW5jdGlvbiBkZWxldGVUb2RvKHt0b2RvSXRlbSwgcHJvamVjdEl0ZW19KSB7XG4gICAgcHJvamVjdEl0ZW0ucmVtb3ZlVG9kbyh0b2RvSXRlbSk7XG4gICAgcHVic3ViLnB1Ymxpc2goJ2xvY2FsU3RvcmFnZVVwZGF0ZWQnKTtcbn1cblxuXG4vLyBGdW5jdGlvbiB0byB1cGRhdGUgdGhlIERPTSBhZnRlciBhbnkgZXZlbnQgcmVsYXRlZCB0byBkYXRhIG1vZGlmaWNhdGlvbiAodGhhdCBpcyB2aXNpYmxlIHRvIHVzZXIpIGlzIHRyaWdnZXJlZFxuZnVuY3Rpb24gdXBkYXRlU2luZ2xlVG9kb1NjcmVlbih7IGNoZWNrbGlzdEl0ZW0sIHRvZG9JdGVtLCBwcm9qZWN0SXRlbSB9KSB7XG4gICAgZGlzcGxheUNvbnRyb2xsZXIuZGlzcGxheVNpbmdsZVRvZG9TY3JlZW4odG9kb0l0ZW0sIHByb2plY3RJdGVtKTtcbiAgICBwdWJzdWIucHVibGlzaCgnbG9jYWxTdG9yYWdlVXBkYXRlZCcpO1xufVxuXG5mdW5jdGlvbiB1cGRhdGVUb2Rvc1NjcmVlbih7dG9kb0l0ZW0sIHByb2plY3RJdGVtfSkgeyAvLyBOb3RlIGRlc3RydWN0dXJpbmcgaXMgdXNlZCBoZXJlXG4gICAgZGlzcGxheUNvbnRyb2xsZXIuZGlzcGxheVRvZG9zU2NyZWVuKHByb2plY3RJdGVtKTtcbiAgICBwdWJzdWIucHVibGlzaCgnbG9jYWxTdG9yYWdlVXBkYXRlZCcpO1xufVxuXG5mdW5jdGlvbiB1cGRhdGVQcm9qZWN0c1NjcmVlbigpIHsgLy8gXG4gICAgZGlzcGxheUNvbnRyb2xsZXIuZGlzcGxheVByb2plY3RzU2NyZWVuKGFsbFByb2plY3RzKTtcbiAgICBwdWJzdWIucHVibGlzaCgnbG9jYWxTdG9yYWdlVXBkYXRlZCcpO1xufVxuXG4vLyBGdW5jdGlvbiB0byB1cGRhdGUgTG9jYWwgU3RvcmFnZVxuZnVuY3Rpb24gdXBkYXRlTG9jYWxTdG9yYWdlKCkge1xuICAgIGlmIChzdG9yYWdlQXZhaWxhYmxlKCdsb2NhbFN0b3JhZ2UnKSkge1xuICAgICAgICBjb25zb2xlLmxvZyhhbGxQcm9qZWN0cyk7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdhbGxQcm9qZWN0cycsIEpTT04uc3RyaW5naWZ5KGFsbFByb2plY3RzKSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdMb2NhbCBTdG9yYWdlIFVwZGF0ZWQhJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgYWxlcnQoJ1RvbyBiYWQsIG5vIGxvY2FsU3RvcmFnZSBmb3IgdXMnKTtcbiAgICB9XG59XG5cbi8vXG5mdW5jdGlvbiB1cGRhdGVQcm9qZWN0RGVmYXVsdFN0YXR1cyhwcm9qZWN0SXRlbSkge1xuICAgIHByb2plY3RJdGVtLnNldERlZmF1bHRTdGF0dXModHJ1ZSk7XG4gICAgLy8gTm93IHdlIG5lZWQgdG8gc2V0IHRoZSBSRVNUIG9mIHByb2plY3RJdGVtcyBmcm9tIGFsbFByb2plY3RzIGFzIG5vdCBkZWZhdWx0XG4gICAgZm9yIChsZXQgcHJvamVjdCBvZiBhbGxQcm9qZWN0cy5wcm9qZWN0c0xpc3QpIHtcbiAgICAgICAgaWYgKHByb2plY3RJdGVtICE9PSBwcm9qZWN0ICYmIHByb2plY3QuaXNEZWZhdWx0KCkpIHtcbiAgICAgICAgICAgIHByb2plY3Quc2V0RGVmYXVsdFN0YXR1cyhmYWxzZSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBwdWJzdWIucHVibGlzaCgnbG9jYWxTdG9yYWdlVXBkYXRlZCcpO1xufVxuXG4vKiBMSVNUIE9GIFRISU5HUyBJIERPTidUIExJS0UgQUJPVVQgVEhJUyBXRUJBUFBcbiAgICAtIE1hbnVhbGx5IGFkZGluZyBwdWJzdWIucHVibGlzaCgnbG9jYWxTdG9yYWdlVXBkYXRlZCcpIHRvIGV2ZXJ5IHNpbmdsZSBwbGFjZSB3aGVyZSBkYXRhIGlzIGNoYW5nZWQuIFBlcmhhcHMgSSBjb3VsZCBhZGQgdGhlIHB1Ymxpc2ggdG8gdGhlIG9iamVjdCBtZXRob2RzIGRpcmVjdGx5P1xuICAgIC0gTG90cyBvZiBEUlkgcHJpbmNpcGxlIHZpb2xhdGlvbnNcbiovXG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBzdG9yYWdlQXZhaWxhYmxlKHR5cGUpIHtcbiAgICBsZXQgc3RvcmFnZTtcbiAgICB0cnkge1xuICAgICAgc3RvcmFnZSA9IHdpbmRvd1t0eXBlXTtcbiAgICAgIGNvbnN0IHggPSBcIl9fc3RvcmFnZV90ZXN0X19cIjtcbiAgICAgIHN0b3JhZ2Uuc2V0SXRlbSh4LCB4KTtcbiAgICAgIHN0b3JhZ2UucmVtb3ZlSXRlbSh4KTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIGUgaW5zdGFuY2VvZiBET01FeGNlcHRpb24gJiZcbiAgICAgICAgLy8gZXZlcnl0aGluZyBleGNlcHQgRmlyZWZveFxuICAgICAgICAoZS5jb2RlID09PSAyMiB8fFxuICAgICAgICAgIC8vIEZpcmVmb3hcbiAgICAgICAgICBlLmNvZGUgPT09IDEwMTQgfHxcbiAgICAgICAgICAvLyB0ZXN0IG5hbWUgZmllbGQgdG9vLCBiZWNhdXNlIGNvZGUgbWlnaHQgbm90IGJlIHByZXNlbnRcbiAgICAgICAgICAvLyBldmVyeXRoaW5nIGV4Y2VwdCBGaXJlZm94XG4gICAgICAgICAgZS5uYW1lID09PSBcIlF1b3RhRXhjZWVkZWRFcnJvclwiIHx8XG4gICAgICAgICAgLy8gRmlyZWZveFxuICAgICAgICAgIGUubmFtZSA9PT0gXCJOU19FUlJPUl9ET01fUVVPVEFfUkVBQ0hFRFwiKSAmJlxuICAgICAgICAvLyBhY2tub3dsZWRnZSBRdW90YUV4Y2VlZGVkRXJyb3Igb25seSBpZiB0aGVyZSdzIHNvbWV0aGluZyBhbHJlYWR5IHN0b3JlZFxuICAgICAgICBzdG9yYWdlICYmXG4gICAgICAgIHN0b3JhZ2UubGVuZ3RoICE9PSAwXG4gICAgICApO1xuICAgIH1cbiAgfSIsImltcG9ydCBNb2RhbEZvcm0gZnJvbSAnLi9ET00tZm9ybS10b2Rvc2NyZWVuLmpzJztcbmltcG9ydCBwdWJzdWIgZnJvbSAnLi9wdWJzdWIuanMnO1xuaW1wb3J0IHsgYWxsUHJvamVjdHMgfSBmcm9tICcuL2luZGV4LmpzJztcblxuLy8gQWxsIHByb2plY3RzIHBhZ2U/IE9SIEFMTCBMT0dJQyBJTiAxIENMQVNTPyBSRU1FTUJFUiBUSElTIElTIExPR0lDLCBFVkVOVFMgTElTVEVORVIgU0hPVUxEIEJFIEFEREVEIEhFUkUuIHRvZG9Nb2RhbCgpIGNhbGwgc2hvdWxkIHJldHVybiBhIG5vZGUgdG8gd2hpY2ggSSBzaG91bGQgYWRkIHRoZSBldmVudGxpc3RlbmVyc1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRE9NQ29udHJvbGxlciB7XG4gICAgI21vZGFsRm9ybSA9IG5ldyBNb2RhbEZvcm0oKTtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5wYWdlVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdoMicpO1xuICAgICAgICB0aGlzLm5hdkJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ25hdicpO1xuICAgICAgICB0aGlzLmFjdGlvbkJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYWN0aW9uLWJ1dHRvbnMnKTtcbiAgICAgICAgdGhpcy5pdGVtc0xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjaXRlbXMtbGlzdCcpO1xuICAgICAgICB0aGlzLmRpYWxvZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2RpYWxvZycpO1xuICAgICAgICB0aGlzLmZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtJyk7XG4gICAgfVxuICAgIFxuICAgIGRpc3BsYXlUb2Rvc1NjcmVlbihwcm9qZWN0SXRlbSkge1xuICAgICAgICAvLyBDbGVhciBzY3JlZW5cbiAgICAgICAgdGhpcy5wYWdlVGl0bGUudGV4dENvbnRlbnQgPSAnJztcbiAgICAgICAgdGhpcy5uYXZCdXR0b24udGV4dENvbnRlbnQgPSAnJztcbiAgICAgICAgdGhpcy5hY3Rpb25CdXR0b25zLnRleHRDb250ZW50ID0gJyc7XG4gICAgICAgIHRoaXMuaXRlbXNMaXN0LnRleHRDb250ZW50ID0gJyc7XG4gICAgICAgIHRoaXMuZm9ybS50ZXh0Q29udGVudCA9ICcnO1xuXG4gICAgICAgIC8vIENoYW5nZSBtb2RhbCBIVE1MXG4gICAgICAgIHRoaXMuI21vZGFsRm9ybS50b2RvTW9kYWwodGhpcy4jbW9kYWxGb3JtLnRvZG9Qcm9wZXJ0aWVzVG9JbmplY3QpOyBcblxuICAgICAgICAvLyBOYW1lIG9mIHNjcmVlblxuICAgICAgICB0aGlzLnBhZ2VUaXRsZS50ZXh0Q29udGVudCA9IHByb2plY3RJdGVtLnRpdGxlO1xuICAgICAgICBcbiAgICAgICAgLy8gTmF2IGJ1dHRvbnMuIEN1cnJlbnRseSBvbmx5IG9uZSB0aGF0IHRha2VzIHVzZXJzIGJhY2sgdG8gdGhlIFByb2plY3RzIHNjcmVlblxuICAgICAgICB0aGlzLm5hdkJ1dHRvbi50ZXh0Q29udGVudCA9ICc8IEJhY2sgdG8gUHJvamVjdHMnO1xuICAgICAgICB0aGlzLm5hdkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICAgICAgICAgICAgdGhpcy5kaXNwbGF5UHJvamVjdHNTY3JlZW4oYWxsUHJvamVjdHMpO1xuICAgICAgICB9KVxuXG4gICAgICAgIC8vIEFjdGlvbiBidXR0b25zLiBCdXR0b24gdG8gYWRkIE5ldyBUb2RvIGl0ZW0gdG8gdGhlIHByb2plY3QgQU5EIFNldCBkZWZhdWx0IGNoZWNrYm94XG4gICAgICAgIGNvbnN0IGFkZFRvZG8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgYWRkVG9kby50ZXh0Q29udGVudCA9ICdOZXcgVG9kbyc7XG4gICAgICAgIHRoaXMuYWN0aW9uQnV0dG9ucy5hcHBlbmRDaGlsZChhZGRUb2RvKTtcbiAgICAgICAgYWRkVG9kby5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLmRpYWxvZy5zaG93TW9kYWwoKTtcbiAgICAgICAgICAgIFxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBzZXREZWZhdWx0RGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgICAgICAgY29uc3Qgc2V0RGVmYXVsdFByb2plY3RMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7XG4gICAgICAgIHNldERlZmF1bHRQcm9qZWN0TGFiZWwudGV4dENvbnRlbnQgPSAnU2V0IGFzIGRlZmF1bHQnO1xuICAgICAgICBzZXREZWZhdWx0UHJvamVjdExhYmVsLnNldEF0dHJpYnV0ZSgnZm9yJywgJ3NldC1hcy1kZWZhdWx0LWlucHV0Jyk7XG5cbiAgICAgICAgY29uc3Qgc2V0RGVmYXVsdFByb2plY3RJbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgICAgIHNldERlZmF1bHRQcm9qZWN0SW5wdXQuc2V0QXR0cmlidXRlKCd0eXBlJywgJ2NoZWNrYm94Jyk7XG4gICAgICAgIHNldERlZmF1bHRQcm9qZWN0SW5wdXQuc2V0QXR0cmlidXRlKCdpZCcsICdzZXQtYXMtZGVmYXVsdC1pbnB1dCcpO1xuICAgICAgICBpZiAocHJvamVjdEl0ZW0uaXNEZWZhdWx0KCkpIHtcbiAgICAgICAgICAgIHNldERlZmF1bHRQcm9qZWN0SW5wdXQuY2hlY2tlZCA9IHRydWU7XG4gICAgICAgICAgICBzZXREZWZhdWx0UHJvamVjdElucHV0LmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBzZXREZWZhdWx0UHJvamVjdElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGUgPT4ge1xuICAgICAgICAgICAgaWYgKHNldERlZmF1bHRQcm9qZWN0SW5wdXQudmFsdWUgPT09ICdvbicpIHtcbiAgICAgICAgICAgICAgICBwdWJzdWIucHVibGlzaCgndXBkYXRlUHJvamVjdERlZmF1bHRTdGF0dXMnLCBwcm9qZWN0SXRlbSk7XG4gICAgICAgICAgICAgICAgc2V0RGVmYXVsdFByb2plY3RJbnB1dC5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbiAgICAgICAgc2V0RGVmYXVsdERpdi5hcHBlbmQoc2V0RGVmYXVsdFByb2plY3RMYWJlbCwgc2V0RGVmYXVsdFByb2plY3RJbnB1dCk7XG4gICAgICAgIHRoaXMuYWN0aW9uQnV0dG9ucy5hcHBlbmRDaGlsZChzZXREZWZhdWx0RGl2KTtcblxuICAgICAgICAvLyBJdGVtcyBsaXN0LiBBbGwgdG9kbyBpdGVtcyBhcmUgbG9hZGVkIGFuZCBkaXNwbGF5ZWQgaGVyZVxuICAgICAgICBpZiAocHJvamVjdEl0ZW0udG9kb0xpc3QubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLml0ZW1zTGlzdC50ZXh0Q29udGVudCA9ICdUaGVyZSBhcmUgbm8gdG9kb3MgaGVyZS4uLidcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZvciAobGV0IHRvZG9JdGVtIG9mIHByb2plY3RJdGVtLnRvZG9MaXN0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuXG4gICAgICAgICAgICAgICAgY29uc3Qgc3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgICAgICAgICAgICBzcGFuLnRleHRDb250ZW50ID0gdG9kb0l0ZW0udGl0bGU7XG4gICAgICAgICAgICAgICAgc3Bhbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXlTaW5nbGVUb2RvU2NyZWVuKHRvZG9JdGVtLCBwcm9qZWN0SXRlbSk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICBsaS5hcHBlbmRDaGlsZChzcGFuKTtcbiAgICBcbiAgICAgICAgICAgICAgICAvLyBEZWxldGUgYnV0dG9uIGdlbmVyYXRlZCBmb3IgZWFjaCBpdGVtIGluIHRoZSBsaXN0XG4gICAgICAgICAgICAgICAgY29uc3QgZGVsZXRlQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgICAgICAgICAgZGVsZXRlQnV0dG9uLnRleHRDb250ZW50ID0gJ2RlbGV0ZSc7XG4gICAgICAgICAgICAgICAgZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHB1YnN1Yi5wdWJsaXNoKCd0b2RvSXRlbURlbGV0ZWQnLCB7dG9kb0l0ZW0sIHByb2plY3RJdGVtfSk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICBcbiAgICAgICAgICAgICAgICBsaS5hcHBlbmRDaGlsZChkZWxldGVCdXR0b24pO1xuICAgICAgICAgICAgICAgIHRoaXMuaXRlbXNMaXN0LmFwcGVuZENoaWxkKGxpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIE1vZGFsIENoZWNrbGlzdCBidXR0b25cbiAgICAgICAgY29uc3QgY2hlY2tsaXN0RGl2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NoZWNrbGlzdC1kaXYnKTtcbiAgICAgICAgY29uc3QgY2hlY2tsaXN0SW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2hlY2tsaXN0LWlucHV0Jyk7XG4gICAgICAgIGNvbnN0IGNoZWNrbGlzdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjaGVja2xpc3QtYWRkLWJ1dHRvbicpO1xuICAgICAgICBjaGVja2xpc3RCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICBjaGVja2xpc3RJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGUgPT4ge1xuICAgICAgICAgICAgaWYgKGNoZWNrbGlzdElucHV0LnZhbHVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBjaGVja2xpc3RCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY2hlY2tsaXN0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcblxuICAgICAgICBcblxuICAgICAgICBcbiAgICAgICAgY29uc3QgY2hlY2tsaXN0VWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpO1xuICAgICAgICBjaGVja2xpc3REaXYuYXBwZW5kQ2hpbGQoY2hlY2tsaXN0VWwpO1xuXG4gICAgICAgIGNvbnN0IGNoZWNrbGlzdEFycmF5ID0gW107IC8vIGZvciB0ZW1wb3Jhcnkgc3RvcmUgdG8gdGhlbiBwYXNzIGl0IG9uY2UgdGhlIHRvZG9JdGVtIGlzIGNyZWF0ZWQgKHdpdGggZG9uZSBidXR0b24pXG4gICAgICAgIGNoZWNrbGlzdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgY2hlY2tsaXN0T2JqZWN0ID0ge307XG4gICAgICAgICAgICBjaGVja2xpc3RPYmplY3QudmFsdWUgPSBjaGVja2xpc3RJbnB1dC52YWx1ZTtcbiAgICAgICAgICAgIGNoZWNrbGlzdEFycmF5LnB1c2goY2hlY2tsaXN0T2JqZWN0KTtcbiAgICAgICAgICAgIGNvbnN0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgICAgICAgICAgIGxpLnRleHRDb250ZW50ID0gY2hlY2tsaXN0SW5wdXQudmFsdWU7XG4gICAgICAgICAgICBjaGVja2xpc3RVbC5hcHBlbmRDaGlsZChsaSk7XG4gICAgICAgICAgICBjaGVja2xpc3RJbnB1dC52YWx1ZSA9ICcnO1xuICAgICAgICAgICAgY2hlY2tsaXN0SW5wdXQuZm9jdXMoKTtcbiAgICAgICAgfSlcbiAgICAgICBcbiAgICAgICAgLy8gTmV3IFRvZG8gY3JlYXRpb24gTW9kYWwuIERvbmUgKyBDYW5jZWwgYnV0dG9ucyBpbXBsZW1lbnRlZC4gQ2hlY2sgZm9ybS1odG1sLmpzIGZvciBtb3JlIGRldGFpbHMuXG4gICAgICAgIGNvbnN0IGRvbmVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdG9kby1wcm9qZWN0LW1vZGFsICNkb25lLWJ1dHRvbicpXG4gICAgICAgIGRvbmVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKHRoaXMuZm9ybSk7XG4gICAgICAgICAgICBjb25zdCB0b2RvSXRlbSA9ICBPYmplY3QuZnJvbUVudHJpZXMoZm9ybURhdGEuZW50cmllcygpKTtcblxuICAgICAgICAgICAgaWYgKHRvZG9JdGVtLnRpdGxlLnRyaW0oKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlcnJvck1zZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNlcnJvci1zcGFuJyk7XG4gICAgICAgICAgICAgICAgZXJyb3JNc2cudGV4dENvbnRlbnQgPSAnUGxlYXNlIGVudGVyIGFkZCBhIHRpdGxlJztcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRvZG9JdGVtLmNoZWNrTGlzdCA9IGNoZWNrbGlzdEFycmF5O1xuICAgICAgICAgICAgcHVic3ViLnB1Ymxpc2goJ3RvZG9JdGVtQWRkZWQnLCB7dG9kb0l0ZW0sIHByb2plY3RJdGVtfSk7IC8vIFRPRE8/IGFkZCBzdWJzY3JpYmVycyB3aGVyZSBuZWVkZWRcbiAgICAgICAgICAgIHRoaXMuZm9ybS5yZXNldCgpO1xuICAgICAgICAgICAgdGhpcy5kaWFsb2cuY2xvc2UoKTtcbiAgICAgICAgfSlcblxuICAgICAgICBjb25zdCBtb2RhbENhbmNlbGJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0b2RvLXByb2plY3QtbW9kYWwgI2Nsb3NlLWRpYWxvZycpO1xuICAgICAgICBtb2RhbENhbmNlbGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZGlhbG9nLmNsb3NlKCk7XG4gICAgICAgIH0pXG4gICAgfVxuICAgIFxuICAgIGRpc3BsYXlQcm9qZWN0c1NjcmVlbihhbGxQcm9qZWN0cykge1xuICAgICAgICAvLyBDbGVhciBzY3JlZW5cbiAgICAgICAgdGhpcy5wYWdlVGl0bGUudGV4dENvbnRlbnQgPSAnJztcbiAgICAgICAgdGhpcy5uYXZCdXR0b24udGV4dENvbnRlbnQgPSAnJztcbiAgICAgICAgdGhpcy5hY3Rpb25CdXR0b25zLnRleHRDb250ZW50ID0gJyc7XG4gICAgICAgIHRoaXMuaXRlbXNMaXN0LnRleHRDb250ZW50ID0gJyc7XG4gICAgICAgIHRoaXMuZm9ybS50ZXh0Q29udGVudCA9ICcnO1xuXG4gICAgICAgIC8vIENoYW5nZSBtb2RhbCBIVE1MXG4gICAgICAgIHRoaXMuI21vZGFsRm9ybS5wcm9qZWN0TW9kYWwoKTsgXG5cbiAgICAgICAgLy8gTmFtZSBvZiBzY3JlZW5cbiAgICAgICAgdGhpcy5wYWdlVGl0bGUudGV4dENvbnRlbnQgPSAnQWxsIFByb2plY3RzJztcbiAgICAgICAgXG4gICAgICAgIC8vIEFjdGlvbiBidXR0b25zLiBDdXJyZW50bHkgb25seSBhIGJ1dHRvbiB0byBhZGQgTmV3IFByb2plY3QgaXRlbS5cbiAgICAgICAgY29uc3QgYWRkUHJvamVjdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICBhZGRQcm9qZWN0LnRleHRDb250ZW50ID0gJ05ldyBQcm9qZWN0JztcbiAgICAgICAgdGhpcy5hY3Rpb25CdXR0b25zLmFwcGVuZENoaWxkKGFkZFByb2plY3QpO1xuICAgICAgICBhZGRQcm9qZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XG4gICAgICAgICAgICB0aGlzLmRpYWxvZy5zaG93TW9kYWwoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gSXRlbXMgbGlzdC4gQWxsIFByb2plY3QgaXRlbXMgYXJlIGxvYWRlZCBhbmQgZGlzcGxheWVkIGhlcmVcbiAgICAgICAgaWYgKGFsbFByb2plY3RzLnByb2plY3RzTGlzdC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMuaXRlbXNMaXN0LnRleHRDb250ZW50ID0gJ1RoZXJlIGFyZSBubyBwcm9qZWN0cy4uLidcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZvciAobGV0IHByb2plY3RJdGVtIG9mIGFsbFByb2plY3RzLnByb2plY3RzTGlzdCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICAgICAgICAgICAgc3Bhbi50ZXh0Q29udGVudCA9IHByb2plY3RJdGVtLnRpdGxlO1xuICAgICAgICAgICAgICAgIHNwYW4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5VG9kb3NTY3JlZW4ocHJvamVjdEl0ZW0pO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgbGkuYXBwZW5kQ2hpbGQoc3Bhbik7XG4gICAgXG4gICAgICAgICAgICAgICAgLy8gRGVsZXRlIGJ1dHRvbiBnZW5lcmF0ZWQgZm9yIGVhY2ggaXRlbSBpbiB0aGUgbGlzdFxuICAgICAgICAgICAgICAgIGNvbnN0IGRlbGV0ZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICAgICAgICAgIGRlbGV0ZUJ1dHRvbi50ZXh0Q29udGVudCA9ICdkZWxldGUnO1xuICAgICAgICAgICAgICAgIGRlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICBwdWJzdWIucHVibGlzaCgncHJvamVjdEl0ZW1EZWxldGVkJywgcHJvamVjdEl0ZW0pO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgXG4gICAgICAgICAgICAgICAgbGkuYXBwZW5kQ2hpbGQoZGVsZXRlQnV0dG9uKTtcbiAgICAgICAgICAgICAgICB0aGlzLml0ZW1zTGlzdC5hcHBlbmRDaGlsZChsaSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICBcbiAgICAgICAgLy8gTmV3IFByb2plY3QgY3JlYXRpb24gTW9kYWwuIERvbmUgKyBDYW5jZWwgYnV0dG9ucyBpbXBsZW1lbnRlZC4gQ2hlY2sgZm9ybS1odG1sLmpzIGZvciBtb3JlIGRldGFpbHMuXG4gICAgICAgIGNvbnN0IGRvbmVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdG9kby1wcm9qZWN0LW1vZGFsICNkb25lLWJ1dHRvbicpXG4gICAgICAgIGRvbmVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKHRoaXMuZm9ybSk7XG4gICAgICAgICAgICBjb25zdCBwcm9qZWN0SXRlbU9iamVjdCA9ICBPYmplY3QuZnJvbUVudHJpZXMoZm9ybURhdGEuZW50cmllcygpKTtcblxuICAgICAgICAgICAgaWYgKHByb2plY3RJdGVtT2JqZWN0LnRpdGxlLnRyaW0oKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlcnJvck1zZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNlcnJvci1zcGFuJyk7XG4gICAgICAgICAgICAgICAgZXJyb3JNc2cudGV4dENvbnRlbnQgPSAnUGxlYXNlIHR5cGUgdGhlIHByb2plY3QgbmFtZSc7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBwdWJzdWIucHVibGlzaCgncHJvamVjdEl0ZW1BZGRlZCcsIHByb2plY3RJdGVtT2JqZWN0KTtcbiAgICAgICAgICAgIHRoaXMuZm9ybS5yZXNldCgpO1xuICAgICAgICAgICAgdGhpcy5kaWFsb2cuY2xvc2UoKTtcbiAgICAgICAgfSlcblxuICAgICAgICBjb25zdCBtb2RhbENhbmNlbGJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0b2RvLXByb2plY3QtbW9kYWwgI2Nsb3NlLWRpYWxvZycpO1xuICAgICAgICBtb2RhbENhbmNlbGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZGlhbG9nLmNsb3NlKCk7XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgZGlzcGxheVNpbmdsZVRvZG9TY3JlZW4odG9kb0l0ZW0sIHByb2plY3RJdGVtKSB7XG4gICAgICAgIC8vIENsZWFyIHNjcmVlbiAvXG4gICAgICAgIHRoaXMucGFnZVRpdGxlLnRleHRDb250ZW50ID0gJyc7XG4gICAgICAgIHRoaXMubmF2QnV0dG9uLnRleHRDb250ZW50ID0gJyc7XG4gICAgICAgIHRoaXMuYWN0aW9uQnV0dG9ucy50ZXh0Q29udGVudCA9ICcnO1xuICAgICAgICB0aGlzLml0ZW1zTGlzdC50ZXh0Q29udGVudCA9ICcnO1xuICAgICAgICB0aGlzLmZvcm0udGV4dENvbnRlbnQgPSAnJztcblxuICAgICAgICAvLyBOYW1lIG9mIHNjcmVlbiAvXG4gICAgICAgIHRoaXMucGFnZVRpdGxlLnRleHRDb250ZW50ID0gdG9kb0l0ZW0udGl0bGU7XG4gICAgICAgIFxuICAgICAgICAvLyBOYXYgYnV0dG9ucy4gQ3VycmVudGx5IG9ubHkgb25lIHRoYXQgdGFrZXMgdXNlcnMgYmFjayB0byB0aGUgVG9kb3Mgc2NyZWVuIC9cbiAgICAgICAgLy8gY29uc3QgcHJvamVjdEl0ZW0gPSB0b2RvSXRlbS5nZXRQYXJlbnQoKTtcbiAgICAgICAgdGhpcy5uYXZCdXR0b24udGV4dENvbnRlbnQgPSAnPCBCYWNrIHRvIFRvZG9zIGxpc3QnO1xuICAgICAgICB0aGlzLm5hdkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICAgICAgICAgICAgdGhpcy5kaXNwbGF5VG9kb3NTY3JlZW4ocHJvamVjdEl0ZW0pO1xuICAgICAgICB9KVxuXG4gICAgICAgIC8vIEFjdGlvbiBidXR0b25zLiBDdXJyZW50bHkgb25seSBhIGJ1dHRvbiB0byBhZGQgTmV3IFByb2plY3QgaXRlbS4gKlxuICAgICAgICBjb25zdCBlZGl0VG9kb0J1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICBlZGl0VG9kb0J1dHRvbi50ZXh0Q29udGVudCA9ICdFZGl0JztcbiAgICAgICAgdGhpcy5hY3Rpb25CdXR0b25zLmFwcGVuZENoaWxkKGVkaXRUb2RvQnV0dG9uKTtcbiAgICAgICAgICAgIC8vIEVESVQgTU9ERVxuICAgICAgICBlZGl0VG9kb0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICAgICAgICAgICAgaWYgKGVkaXRUb2RvQnV0dG9uLnRleHRDb250ZW50ID09PSAnRWRpdCcpIHtcbiAgICAgICAgICAgICAgICAvLyBDaGFuZ2UgdG9kbyBzY3JlZW4gdG8gRWRpdCBtb2RlXG4gICAgICAgICAgICAgICAgZWRpdFRvZG9CdXR0b24udGV4dENvbnRlbnQgPSAnU2F2ZSBjaGFuZ2VzJztcbiAgICAgICAgICAgICAgICB0aGlzLml0ZW1zTGlzdC50ZXh0Q29udGVudCA9ICcnO1xuXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgdG9kb1Byb3BlcnR5IG9mIHRoaXMuI21vZGFsRm9ybS50b2RvUHJvcGVydGllc1RvSW5qZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0b2RvUHJvcGVydHkubmFtZSA9PT0gJ1RpdGxlJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYWdlVGl0bGUudGV4dENvbnRlbnQgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFnZVRpdGxlLmFwcGVuZENoaWxkKHRvZG9Qcm9wZXJ0eS5kaXNwbGF5RGV0YWlsc0Zyb21Ub2RvQXNFZGl0YWJsZSh0b2RvSXRlbSkpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYodG9kb1Byb3BlcnR5Lm5hbWUgPT09ICdDaGVja2xpc3QnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXRlbXNMaXN0LmFwcGVuZENoaWxkKHRvZG9Qcm9wZXJ0eS5kaXNwbGF5RGV0YWlsc0Zyb21Ub2RvQXNFZGl0YWJsZSh0b2RvSXRlbSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gQWRkaXRpb25hbHkgYSBzcGFuIGJveCB0byBzaG93IHZhbGlkYXRpb24gZXJyb3JzXG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3JTcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICAgICAgICAgIGVycm9yU3Bhbi5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2Vycm9yLXNwYW4nKVxuICAgICAgICAgICAgICAgIGVycm9yU3Bhbi50ZXh0Q29udGVudCA9ICcnO1xuICAgICAgICAgICAgICAgIHRoaXMuaXRlbXNMaXN0LmFwcGVuZENoaWxkKGVycm9yU3Bhbik7XG4gICAgICAgICAgICB9IGVsc2UgeyAvLyBXaGVuIGl0J3MgdGhlIFNhdmUgY2hhbmdlcyBidXR0b25cbiAgICAgICAgICAgICAgICBjb25zdCB0aXRsZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3RpdGxlLWlucHV0Jyk7XG4gICAgICAgICAgICAgICAgY29uc3QgZGVzY3JpcHRpb25GaWVsZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNkZXNjcmlwdGlvbicpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGR1ZURhdGVGaWVsZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNkdWUtZGF0ZScpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHByaW9yaXR5RmllbGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHJpb3JpdHknKTtcbiAgICAgICAgICAgICAgICBjb25zdCBub3Rlc0ZpZWxkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI25vdGVzJyk7XG5cbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgdG9kbyBpdGVtcyB3aXRoIG5ld2x5IGFkZGVkIGRhdGEgXG4gICAgICAgICAgICAgICAgaWYgKHRpdGxlSW5wdXQudmFsdWUudHJpbSgpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBlcnJvclNwYW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZXJyb3Itc3BhbicpO1xuICAgICAgICAgICAgICAgICAgICBlcnJvclNwYW4udGV4dENvbnRlbnQgPSAnVG9kbyBtdXN0IGhhdmUgYSB0aXRsZSc7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0b2RvSXRlbS50aXRsZSA9IHRpdGxlSW5wdXQudmFsdWU7XG4gICAgICAgICAgICAgICAgdG9kb0l0ZW0uZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbkZpZWxkLnZhbHVlO1xuICAgICAgICAgICAgICAgIHRvZG9JdGVtLmR1ZURhdGUgPSBkdWVEYXRlRmllbGQudmFsdWU7XG4gICAgICAgICAgICAgICAgdG9kb0l0ZW0ucHJpb3JpdHkgPSBwcmlvcml0eUZpZWxkLnZhbHVlO1xuICAgICAgICAgICAgICAgIHRvZG9JdGVtLm5vdGVzID0gbm90ZXNGaWVsZC52YWx1ZTtcblxuICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheVNpbmdsZVRvZG9TY3JlZW4odG9kb0l0ZW0sIHByb2plY3RJdGVtKTtcbiAgICAgICAgICAgICAgICBwdWJzdWIucHVibGlzaCgnbG9jYWxTdG9yYWdlVXBkYXRlZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBJdGVtcyBsaXN0LiBBbGwgdG9kbyBpdGVtcyBhcmUgbG9hZGVkIGFuZCBkaXNwbGF5ZWQgaGVyZVxuICAgICAgICBmb3IgKGxldCB0b2RvUHJvcGVydHkgb2YgdGhpcy4jbW9kYWxGb3JtLnRvZG9Qcm9wZXJ0aWVzVG9JbmplY3QpIHsgLy9hcnJheSBvZiBvYmplY3RzIHRoYXQgaGF2ZSBhIG1ldGhvZCB0byBjcmVhdGUgZGlzcGxheSBlbGVtZW50c1xuICAgICAgICAgICAgaWYgKHRvZG9Qcm9wZXJ0eS5uYW1lID09PSAnVGl0bGUnKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuaXRlbXNMaXN0LmFwcGVuZENoaWxkKHRvZG9Qcm9wZXJ0eS5kaXNwbGF5RWxlbWVudHNXaXRoQ29udGVudEZvclRvZG9TY3JlZW4odG9kb0l0ZW0sIHByb2plY3RJdGVtKSk7IC8vIGVuZCBvZiBibG9ja1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2hlY2tsaXN0IGFkZCBidXR0b25cbiAgICAgICAgY29uc3QgY2hlY2tsaXN0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NoZWNrbGlzdC1hZGQtYnV0dG9uLXRvZG8nKTtcbiAgICAgICAgY29uc3QgY2hlY2tsaXN0SW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2hlY2tsaXN0LWlucHV0LXRvZG8nKTtcbiAgICAgICAgY2hlY2tsaXN0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgY2hlY2tsaXN0SW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBlID0+IHtcbiAgICAgICAgICAgIGlmIChjaGVja2xpc3RJbnB1dC52YWx1ZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgY2hlY2tsaXN0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNoZWNrbGlzdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbiAgICAgICAgY2hlY2tsaXN0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XG4gICAgICAgICAgICBsZXQgY2hlY2tsaXN0SXRlbSA9IGNoZWNrbGlzdElucHV0LnZhbHVlXG4gICAgICAgICAgICBwdWJzdWIucHVibGlzaCgnY2hlY2tsaXN0SXRlbUFkZGVkJywgeyBjaGVja2xpc3RJdGVtLCB0b2RvSXRlbSwgcHJvamVjdEl0ZW0gfSk7XG4gICAgICAgIH0pXG4gICAgfVxufSIsImltcG9ydCB7IFRvZG9JdGVtLCBQcm9qZWN0SXRlbSwgQWxsUHJvamVjdHMgfSBmcm9tICcuL3RvZG8tcHJvamVjdC1jcmVhdG9ycy5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHJldHJpZXZlU3RvcmVkRGF0YShrZXkpIHtcbiAgICBjb25zdCBhbGxNeVJhd1Byb2plY3RzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpKTtcblxuICAgIGNvbnN0IGFsbE15UmVzdG9yZWRQcm9qZWN0cyA9IG5ldyBBbGxQcm9qZWN0cygpO1xuXG4gICAgZm9yIChsZXQgcHJvamVjdEl0ZW1SYXcgb2YgYWxsTXlSYXdQcm9qZWN0cy5wcm9qZWN0c0xpc3QpIHtcbiAgICAgICAgY29uc3QgcHJvamVjdEl0ZW1SZXN0b3JlZCA9IG5ldyBQcm9qZWN0SXRlbSgpO1xuICAgICAgXG4gICAgICAgIC8vICdGb3Igb2YnIGxvb3BzIHRvIHJlc3RvcmUgdGhlIHRvZG9MaXN0IGFuZCBjaGVja0xpc3Qgb25seSBcbiAgICAgICAgZm9yIChsZXQgdG9kb0l0ZW1SYXcgb2YgcHJvamVjdEl0ZW1SYXcudG9kb0xpc3QpIHtcbiAgICAgICAgICAgIGNvbnN0IHRvZG9JdGVtUmVzdG9yZWQgPSBuZXcgVG9kb0l0ZW0oKTtcblxuICAgICAgICAgICAgLy8gY2hlY2tMaXN0IGlzIGp1c3QgYW4gYXJyYXkgc28gd2UganVzdCBjb3B5XG4gICAgICAgICAgICBmb3IgKGxldCBjaGVja2xpc3RJdGVtUmF3IG9mIHRvZG9JdGVtUmF3LmNoZWNrTGlzdCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoZWNrbGlzdEl0ZW1SZXN0b3JlZCA9IGNoZWNrbGlzdEl0ZW1SYXc7XG4gICAgICAgICAgICAgICAgdG9kb0l0ZW1SZXN0b3JlZC5hZGRDaGVja2xpc3RJdGVtKGNoZWNrbGlzdEl0ZW1SZXN0b3JlZCwgY2hlY2tsaXN0SXRlbVJhdy5zdGF0ZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vICdGb3IgaW4nIHRvIHJlc3RvcmUgdG9kbyBwcm9wZXJ0aWVzIGV4Y2VwdCBmb3IgY2hlY2tMaXN0XG4gICAgICAgICAgICBmb3IgKGxldCB0b2RvUHJvcGVydHkgaW4gdG9kb0l0ZW1SYXcpIHtcbiAgICAgICAgICAgICAgICBpZiAodG9kb1Byb3BlcnR5ID09PSAnY2hlY2tMaXN0Jykge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0b2RvSXRlbVJlc3RvcmVkW3RvZG9Qcm9wZXJ0eV0gPSB0b2RvSXRlbVJhd1t0b2RvUHJvcGVydHldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcHJvamVjdEl0ZW1SZXN0b3JlZC5hZGRUb2RvKHRvZG9JdGVtUmVzdG9yZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gJ0ZvciBpbicgdG8gcmVzdG9yZSBwcm9qZWN0IHByb3BlcnRpZXMgZXhjZXB0IGZvciB0b2RvTGlzdFxuICAgICAgICBmb3IgKGxldCBwcm9qZWN0UHJvcGVydHkgaW4gcHJvamVjdEl0ZW1SYXcpIHtcbiAgICAgICAgICAgIGlmIChwcm9qZWN0UHJvcGVydHkgPT09ICd0b2RvTGlzdCcpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcHJvamVjdEl0ZW1SZXN0b3JlZFtwcm9qZWN0UHJvcGVydHldID0gcHJvamVjdEl0ZW1SYXdbcHJvamVjdFByb3BlcnR5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgYWxsTXlSZXN0b3JlZFByb2plY3RzLmFkZFByb2plY3QocHJvamVjdEl0ZW1SZXN0b3JlZCk7XG4gICAgfVxuICAgIHJldHVybiBhbGxNeVJlc3RvcmVkUHJvamVjdHM7XG59Il0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJleHBvcnRzIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiVG9kb0l0ZW0iLCJjb25zdHJ1Y3RvciIsInRoaXMiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwiZHVlRGF0ZSIsInByaW9yaXR5Iiwibm90ZXMiLCJjaGVja0xpc3QiLCJhZGRDaGVja2xpc3RJdGVtIiwiaXRlbSIsInN0YXRlIiwib2JqZWN0IiwidmFsdWUiLCJwdXNoIiwicmVtb3ZlQ2hlY2tsaXN0SXRlbSIsInNwbGljZSIsImluZGV4T2YiLCJQcm9qZWN0SXRlbSIsIl9kZWZhdWx0U3RhdHVzIiwidG9kb0xpc3QiLCJpc0RlZmF1bHQiLCJzZXREZWZhdWx0U3RhdHVzIiwiYm9vbCIsImFkZFRvZG8iLCJ0b2RvIiwicmVtb3ZlVG9kbyIsIkFsbFByb2plY3RzIiwicHJvamVjdHNMaXN0IiwiYWRkUHJvamVjdCIsInByb2plY3QiLCJyZW1vdmVQcm9qZWN0IiwiZXZlbnRzIiwic3Vic2NyaWJlIiwiZXZlbnQiLCJjYWxsYmFjayIsInB1Ymxpc2giLCJkYXRhIiwiZm9yRWFjaCIsIk5ld01vZGFsRm9ybSIsInByb2plY3RNb2RhbCIsImZvcm0iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJ0ZXh0Q29udGVudCIsImNyZWF0ZUVsZW1lbnQiLCJ0aXRsZUlucHV0Iiwic2V0QXR0cmlidXRlIiwiaXNEZWZhdWx0SW5wdXQiLCJkb25lQnV0dG9uIiwiY2xvc2VCdXR0b24iLCJlcnJvclNwYW4iLCJhcHBlbmQiLCJ0b2RvUHJvcGVydGllc1RvSW5qZWN0IiwiVG9kb1RpdGxlIiwiVG9kb0Rlc2NyaXB0aW9uIiwiVG9kb0R1ZURhdGUiLCJUb2RvUHJpb3JpdHkiLCJUb2RvTm90ZXMiLCJUb2RvQ2hlY2tsaXN0IiwidG9kb01vZGFsIiwicHJvcGVydGllcyIsInByb3BlcnR5IiwibGFiZWwiLCJuYW1lIiwibmFtZUFzSFRNTEF0dHJpYnV0ZSIsImNyZWF0ZUlucHV0RWxlbWVudHNGb3JGb3JtIiwiaW5wdXQiLCJkaXNwbGF5RGV0YWlsc0Zyb21Ub2RvQXNFZGl0YWJsZSIsInRvZG9JdGVtIiwiZGlzcGxheUVsZW1lbnRzV2l0aENvbnRlbnRGb3JUb2RvU2NyZWVuIiwiZmllbGRzZXQiLCJsZWdlbmQiLCJhcHBlbmRDaGlsZCIsInAiLCJzZWxlY3QiLCJwcmlvcml0aWVzIiwiZGVmYXVsdE9wdGlvbiIsIm9wdGlvbiIsInRvTG93ZXJDYXNlIiwic2xpY2UiLCJjcmVhdGVTZWxlY3RXaXRoUHJpb3JpdHlPcHRpb25zIiwiZGl2IiwiYnV0dG9uIiwicHJvamVjdEl0ZW0iLCJjaGVja2xpc3RJbnB1dCIsInVsIiwiY2hlY2tsaXN0SXRlbSIsImxpIiwiY2hlY2tlZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwicHVic3ViIiwiZGVsZXRlQ2hlY2tsaXN0QnV0dG9uIiwibmV3VG9kb0l0ZW0iLCJhbGxQcm9qZWN0cyIsIm5ld1Byb2plY3RJdGVtIiwiaXNkZWZhdWx0IiwiY29uc29sZSIsImxvZyIsInVwZGF0ZVRvZG9zU2NyZWVuIiwidXBkYXRlUHJvamVjdHNTY3JlZW4iLCJ1cGRhdGVTaW5nbGVUb2RvU2NyZWVuIiwidHlwZSIsInN0b3JhZ2UiLCJ3aW5kb3ciLCJ4Iiwic2V0SXRlbSIsInJlbW92ZUl0ZW0iLCJET01FeGNlcHRpb24iLCJjb2RlIiwibGVuZ3RoIiwic3RvcmFnZUF2YWlsYWJsZSIsImFsZXJ0IiwibG9jYWxTdG9yYWdlIiwiSlNPTiIsInN0cmluZ2lmeSIsImRpc3BsYXlDb250cm9sbGVyIiwicGFnZVRpdGxlIiwibmF2QnV0dG9uIiwiYWN0aW9uQnV0dG9ucyIsIml0ZW1zTGlzdCIsImRpYWxvZyIsImRpc3BsYXlUb2Rvc1NjcmVlbiIsImRpc3BsYXlQcm9qZWN0c1NjcmVlbiIsInNob3dNb2RhbCIsInNldERlZmF1bHREaXYiLCJzZXREZWZhdWx0UHJvamVjdExhYmVsIiwic2V0RGVmYXVsdFByb2plY3RJbnB1dCIsImRpc2FibGVkIiwic3BhbiIsImRpc3BsYXlTaW5nbGVUb2RvU2NyZWVuIiwiZGVsZXRlQnV0dG9uIiwiY2hlY2tsaXN0RGl2IiwiY2hlY2tsaXN0QnV0dG9uIiwiY2hlY2tsaXN0VWwiLCJjaGVja2xpc3RBcnJheSIsImNoZWNrbGlzdE9iamVjdCIsImZvY3VzIiwicHJldmVudERlZmF1bHQiLCJmb3JtRGF0YSIsIkZvcm1EYXRhIiwiZnJvbUVudHJpZXMiLCJlbnRyaWVzIiwidHJpbSIsInJlc2V0IiwiY2xvc2UiLCJwcm9qZWN0SXRlbU9iamVjdCIsImVkaXRUb2RvQnV0dG9uIiwidG9kb1Byb3BlcnR5IiwiZGVzY3JpcHRpb25GaWVsZCIsImR1ZURhdGVGaWVsZCIsInByaW9yaXR5RmllbGQiLCJub3Rlc0ZpZWxkIiwiZ2V0SXRlbSIsImFsbE15UmF3UHJvamVjdHMiLCJwYXJzZSIsImFsbE15UmVzdG9yZWRQcm9qZWN0cyIsInByb2plY3RJdGVtUmF3IiwicHJvamVjdEl0ZW1SZXN0b3JlZCIsInRvZG9JdGVtUmF3IiwidG9kb0l0ZW1SZXN0b3JlZCIsImNoZWNrbGlzdEl0ZW1SYXciLCJjaGVja2xpc3RJdGVtUmVzdG9yZWQiLCJwcm9qZWN0UHJvcGVydHkiLCJyZXRyaWV2ZVN0b3JlZERhdGEiLCJmaXJzdERlZmF1bHRQcm9qZWN0Il0sInNvdXJjZVJvb3QiOiIifQ==